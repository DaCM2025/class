<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-be2dad9397c9b99732ed2a04f2c65f62.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-99.9.9">

  <meta name="author" content="Samuel Orso">
  <meta name="dcterms.date" content="2025-10-16">
  <title>Lecture 3 ‚Äî Data Management &amp; Collection</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-4672a6d53a7f172c9e50360c0960cbcc.css">
  <link rel="stylesheet" href="theme_dacm.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lecture 3 ‚Äî Data Management &amp; Collection</h1>
  <p class="subtitle">Data &amp; Code Management: From Collection to Application</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Samuel Orso 
</div>
</div>
</div>

  <p class="date">2025-10-16</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/relational-databases" id="/toc-relational-databases">Relational Databases</a></li>
<li><a href="#/sql-basics" id="/toc-sql-basics">SQL Basics</a></li>
<li><a href="#/api" id="/toc-api">API</a></li>
<li><a href="#/webscraping" id="/toc-webscraping">Webscraping</a></li>
</ul>
</nav>
</section>
<section id="learning-goals" class="slide level2">
<h2>Learning goals</h2>
<ul>
<li>Understand relational models: tables, rows, columns, <strong>keys</strong>, <strong>constraints</strong></li>
<li>Write <strong>SQL</strong>: <code>SELECT</code>, <code>WHERE</code>, <code>ORDER BY</code>, <code>LIMIT</code>, <code>GROUP BY</code>, <code>HAVING</code>, <code>JOIN</code></li>
<li>Connect to SQL from <strong>R (DBI)</strong> and <strong>Python (sqlite3 / SQLAlchemy / pandas)</strong></li>
<li>Understand <strong>HTTP</strong> and the request/response cycle</li>
<li>Know when to use <strong>APIs</strong> vs <strong>web scraping</strong></li>
<li>Parse <strong>HTML</strong> using CSS selectors (R <code>rvest</code>, Python <code>BeautifulSoup</code>)</li>
<li>Peek at <strong>dynamic sites</strong></li>
<li>Use <strong>regex</strong> for cleaning and extraction (R &amp; Python)</li>
</ul>
</section>
<section class="slide level2">

</section>
<section>
<section id="relational-databases" class="title-slide slide level1 center">
<h1>Relational Databases</h1>

</section>
<section id="typical-data-for-a-project" class="slide level2">
<h2>Typical Data for a Project</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Transactional</strong></td>
<td>Your data</td>
</tr>
<tr class="even">
<td><strong>Behavioral</strong></td>
<td>Your data</td>
</tr>
<tr class="odd">
<td><strong>Public Data</strong></td>
<td>Open datasets</td>
</tr>
<tr class="even">
<td><strong>Premium Data</strong></td>
<td>Paid datasets</td>
</tr>
</tbody>
</table>
</section>
<section id="typical-data-for-a-project-1" class="slide level2">
<h2>Typical Data for a Project</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>üí≥ Transactional (records of exchanges)</strong> - <em>What it looks like:</em> order lines, invoices, payments<br>
- <em>Typical fields:</em> <code>order_id</code>, <code>customer_id</code>, <code>sku</code>, <code>qty</code>, <code>price</code>, <code>timestamp</code><br>
- <em>Example dataset:</em> <strong>UCI Online Retail II</strong> (real e-commerce transactions)<br>
<small><a href="https://archive.ics.uci.edu/datasets?search=Online+Retail" class="uri">https://archive.ics.uci.edu/datasets?search=Online+Retail</a></small></p>
<p><strong>üë£ Behavioral (events &amp; interactions)</strong> - <em>What it looks like:</em> page views, clicks, scrolls, add-to-cart<br>
- <em>Typical fields:</em> <code>user_id</code>, <code>session_id</code>, <code>event_name</code>, <code>event_params</code>, <code>ts</code><br>
- <em>Example datasets/docs:</em> <strong>GA BigQuery sample</strong> (web/app) and <strong>Snowplow events model</strong><br>
<small><a href="https://developers.google.com/analytics/bigquery/web-ecommerce-demo-dataset/" class="uri">https://developers.google.com/analytics/bigquery/web-ecommerce-demo-dataset/</a> ‚Ä¢ <a href="https://docs.snowplow.io/docs/fundamentals/events/" class="uri">https://docs.snowplow.io/docs/fundamentals/events/</a></small></p>
</div><div class="column" style="width:50%;">
<p><strong>üèõÔ∏è Public Data (open gov &amp; orgs)</strong> - <em>What it looks like:</em> macro indicators, demographics, prices, geo<br>
- <em>Where to find:</em> <strong>opendata.swiss</strong>, <strong>World Bank WDI</strong>, <strong>Eurostat</strong><br>
<small><a href="https://www.bfs.admin.ch/bfs/en/home/services/ogd/portal.html" class="uri">https://www.bfs.admin.ch/bfs/en/home/services/ogd/portal.html</a> ‚Ä¢ <a href="https://data.worldbank.org/indicator" class="uri">https://data.worldbank.org/indicator</a> ‚Ä¢ <a href="https://ec.europa.eu/eurostat/data" class="uri">https://ec.europa.eu/eurostat/data</a></small></p>
<p><strong>üíº Premium Data (licensed/commercial)</strong> - <em>What it looks like:</em> real-time market data, fundamentals, consumer panels<br>
- <em>Providers (examples):</em> <strong>Bloomberg Terminal</strong>, <strong>S&amp;P Global Market Intelligence</strong><br>
<small><a href="https://www.bloomberg.com/professional/products/bloomberg-terminal/" class="uri">https://www.bloomberg.com/professional/products/bloomberg-terminal/</a> ‚Ä¢ <a href="https://www.spglobal.com/market-intelligence/en" class="uri">https://www.spglobal.com/market-intelligence/en</a></small></p>
</div></div>
</section>
<section id="data-warehouse" class="slide level2">
<h2>Data Warehouse</h2>
<p>In an organization, data is typically stored in:</p>
<ol type="1">
<li>Several computers: <strong>operational databases</strong></li>
<li>A central place for analysis: a <strong>data warehouse</strong> for <strong>analytical data</strong>.</li>
</ol>
</section>
<section id="flow-of-data-processing" class="slide level2">
<h2>Flow of Data Processing</h2>
<ol type="1">
<li>Formulate business questions</li>
<li>Select DB/NoSQL and set it up</li>
<li>ETL (Extract - Transform - Load)</li>
<li>Query Data/Create predictive models</li>
<li>Present/Visualize Data</li>
</ol>
</section>
<section id="tools-for-big-data-analysis" class="slide level2">
<h2>Tools for Big Data Analysis</h2>
<div class="columns">
<div class="column" style="width:55%;">
<p>There exist many tools for Big Data analysis. Some of them are:</p>
<ul>
<li>Databases (SQL)<br>
</li>
<li>NoSQL platforms<br>
</li>
<li>Cloud storage options (AWS, Google Cloud, etc.)<br>
</li>
<li>The easiest one of all (and the oldest!) is a database.<br>
</li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="images/tools_big_data.png" style="width:90.0%"></p>
</div></div>
</section>
<section id="data-management-on" class="slide level2">
<h2>Data Management on‚Ä¶</h2>
<p>Most common data management platforms:</p>
<ul>
<li><strong>Relational Databases (RDBMS)</strong> ‚Äì Structure-based, SQL support.</li>
<li><strong>NoSQL</strong> ‚Äì Flexible schema, good for unstructured data.</li>
</ul>
<p><strong>On-Premises or Cloud-Based</strong></p>
</section>
<section id="sql-nosql" class="slide level2">
<h2>SQL / NoSQL</h2>
<div class="columns">
<div class="column" style="width:55%;">
<h3 id="sql-databases-relational-databases" class="anchored">SQL Databases (relational databases)</h3>
<ul>
<li>Structured query language</li>
<li>Suited for structured data</li>
<li>Relationships and tables</li>
</ul>
<h3 id="nosql-databases-non-relational-databases" class="anchored">NoSQL Databases (non-relational databases)</h3>
<ul>
<li>Dynamic schema for unstructured data</li>
<li>Flexible for creating unique structures</li>
<li>Unstructured or semi-structured data</li>
<li>Document, graph, column, KeyValue structures</li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="images/sql_nosql.png" style="width:90.0%"></p>
</div></div>
</section>
<section id="relational-systems" class="slide level2">
<h2>Relational Systems</h2>
<div class="columns">
<div class="column" style="width:55%;">
<h3 id="advantages-of-relational-systems" class="anchored">Advantages of Relational Systems:</h3>
<ul>
<li>Mature technology:
<ul>
<li>Well-defined interfaces (SQL)</li>
<li>Structured and organized</li>
<li>Provides meta-data in the form of a schema</li>
</ul></li>
<li>Built-in multi-user synchronization for data integrity</li>
<li>Good at basic statistics and reporting</li>
<li>Built-in query processing engines</li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="images/rdbms.jpeg" style="width:90.0%"></p>
</div></div>
</section>
<section id="object-relational-mapping" class="slide level2">
<h2>Object-relational mapping</h2>

<img data-src="images/relational_system.png" class="r-stretch"></section>
<section class="slide level2">

</section></section>
<section>
<section id="sql-basics" class="title-slide slide level1 center">
<h1>SQL Basics</h1>

</section>
<section id="sql-structured-query-language" class="slide level2">
<h2>SQL = Structured Query Language</h2>
<ul>
<li>It is a compact language to express complex questions. For example:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a></a><span class="kw">SELECT</span> country, pollutant, particles</span>
<span id="cb1-2"><a></a><span class="kw">FROM</span> `air_quality`</span>
<span id="cb1-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'India'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'NO2'</span> <span class="kw">AND</span> particles <span class="op">&gt;</span> <span class="dv">100</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>You don‚Äôt need to specify the steps for accomplishing this task (this is an example of <strong>declarative programming</strong>).</li>
<li>The SQL runtime decomposes the query into subroutines and picks the best way to execute it (i.e., which subroutine to do first, which second, etc).</li>
</ul>
</section>
<section id="section" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a></a><span class="kw">SELECT</span> country, pollutant, particles</span>
<span id="cb2-2"><a></a><span class="kw">FROM</span> `air_quality`</span>
<span id="cb2-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'India'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'NO2'</span> <span class="kw">AND</span> particles <span class="op">&gt;</span> <span class="dv">100</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Suppose that:</p>
<ul>
<li><code>country</code> = {India, ‚Ä¶} is of length 1,000,</li>
<li><code>pollutant</code> = {NO2, ‚Ä¶} is of length 100,</li>
<li><code>particles</code> = {100, 90, ‚Ä¶} is of length 10,000.</li>
</ul>
<p>Which filter in the <code>WHERE</code> clause would you run first?</p>
<p><em>The query scheduler takes care of it, we don‚Äòt have to worry about this.</em></p>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th>Country</th>
<th>Pollutant</th>
<th>Particles</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>USA</td>
<td>NO2</td>
<td>90</td>
</tr>
<tr class="even">
<td>USA</td>
<td>CO2</td>
<td>100</td>
</tr>
<tr class="odd">
<td>‚Ä¶</td>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
</tr>
<tr class="even">
<td>India</td>
<td>NO2</td>
<td>200</td>
</tr>
<tr class="odd">
<td>India</td>
<td>NO2</td>
<td>210</td>
</tr>
<tr class="even">
<td>India</td>
<td>CO2</td>
<td>110</td>
</tr>
<tr class="odd">
<td>‚Ä¶</td>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
</tr>
<tr class="even">
<td>Switzerland</td>
<td>CO2</td>
<td>20</td>
</tr>
<tr class="odd">
<td>Switzerland</td>
<td>CO2</td>
<td>20</td>
</tr>
<tr class="even">
<td>‚Ä¶</td>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="sql-recap-using-bigquery" class="slide level2">
<h2>SQL recap using BigQuery</h2>

<img data-src="images/googlecloud.png" class="r-stretch"></section>
<section class="slide level2">

<h3 id="practicing-sql-with-bigquery" class="anchored">Practicing SQL with BigQuery</h3>
<p>Before to begin:</p>
<ol type="1">
<li><p>In the Google Cloud console, select or create a Google Cloud project.<br>
</p></li>
<li><p>BigQuery has lots of public data available. To access it, click on ADD towards top left:<br>
<img data-src="images/bigquery1.png"></p></li>
<li><p>Enter ‚Äúpublic dataset‚Äù in the search bar:<br>
<img data-src="images/bigquery2.png"></p></li>
</ol>
</section>
<section class="slide level2">

<ol start="4" type="1">
<li>Then we propose to use the <code>bigquery-public-data.openaq.global_air_quality</code> dataset:<br>
<img data-src="images/bigquery3.png"></li>
</ol>
</section>
<section class="slide level2">

<ol start="5" type="1">
<li>You can preview the dataset by clicking on the table name:<br>
<img data-src="images/bigquery4.png"></li>
</ol>
</section>
<section class="slide level2">

<ol start="6" type="1">
<li><p>To start querying the dataset, you can click on ‚ÄúHome‚Äù button then click on ‚ÄúSQL QUERY‚Äù:<br>
<img data-src="images/bigquery5.png"></p></li>
<li><p>Now you write SQL commands in the query windows and click on ‚ÄúRUN‚Äù to execute.</p></li>
</ol>
</section>
<section id="select-from-where" class="slide level2">
<h2>Select, From, Where</h2>
<div class="columns">
<div class="column" style="width:62%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a></a><span class="kw">SELECT</span> city  </span>
<span id="cb3-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb3-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'CH'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Asked ChatGPT for comment on SQL query:</strong></p>
<ul>
<li><p><strong><code>SELECT city</code></strong>: Specifies that we want to retrieve only the values in the <strong>city</strong> column.</p></li>
<li><p><strong><code>FROM 'bigquery-public-data.openaq.global_air_quality'</code></strong>: Indicates the source table where the data is stored. In this case, it‚Äôs the <strong>global_air_quality</strong> table, which is part of the <strong>openaq</strong> dataset within <strong>bigquery-public-data</strong> on Google BigQuery.</p></li>
<li><p><strong><code>WHERE country = 'CH'</code></strong>: This is a filter condition that limits the results to only those rows where the <strong>country</strong> column has the value <strong>‚ÄòCH‚Äô</strong> (the country code for Switzerland).</p></li>
</ul>
</div><div class="column" style="width:38%;">
<p><img data-src="images/sql1.png" style="width:90.0%"></p>
</div></div>
</section>
<section id="select-from-where-with-distinct" class="slide level2">
<h2>Select, From, Where with Distinct</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><a></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> city, country  </span>
<span id="cb4-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb4-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'CH'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Note: Capitalization is not required for SQL commands but it is a common convention to make SQL keywords stand out. It is considered best practice.</p>
</div><div class="column" style="width:50%;">
<p><img data-src="images/sql2.png" style="width:90.0%"></p>
</div></div>
</section>
<section id="filtering-with-conditions" class="slide level2">
<h2>Filtering with Conditions</h2>
<blockquote>
<p><strong>Query:</strong> Records in India with no2 value more than 100.</p>
</blockquote>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a></a><span class="kw">SELECT</span> city, country, pollutant, <span class="fu">value</span>  </span>
<span id="cb5-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb5-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'IN'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'no2'</span> <span class="kw">AND</span> <span class="fu">value</span> <span class="op">&gt;</span> <span class="dv">100</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

<img data-src="images/sql3.png" style="width:90.0%" class="r-stretch"></section>
<section id="limit-the-number-of-results" class="slide level2">
<h2>LIMIT the Number of Results</h2>

<img data-src="images/sql4.png" style="width:90.0%" class="r-stretch"></section>
<section id="select-all-columns-with" class="slide level2">
<h2>Select all columns with <code>*</code></h2>

<img data-src="images/sql5.png" style="width:90.0%" class="r-stretch"></section>
<section id="counting-records-with-count" class="slide level2">
<h2>Counting Records with COUNT()</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>)  </span>
<span id="cb6-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb6-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'IN'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'no2'</span> <span class="kw">AND</span> <span class="fu">value</span> <span class="op">&gt;</span> <span class="dv">100</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

<img data-src="images/sql6.png" style="width:90.0%" class="r-stretch"></section>
<section id="aggregate-functions-min-max-sum-avg" class="slide level2">
<h2>Aggregate Functions: MIN(), MAX(), SUM(), AVG()</h2>
<blockquote>
<p><strong>Query:</strong> What is the average no2 pollutant value in US? In India?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(<span class="fu">value</span>) <span class="kw">AS</span> avg_no2  </span>
<span id="cb7-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb7-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'US'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'no2'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img data-src="images/sql7.png" style="width:90.0%"></p>
</div><div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(<span class="fu">value</span>) <span class="kw">AS</span> avg_no2  </span>
<span id="cb8-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb8-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'IN'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'no2'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img data-src="images/sql8.png" style="width:90.0%"></p>
</div></div>
<p>What about Switzerland? What about the max?</p>
</section>
<section id="with-clause" class="slide level2">
<h2>WITH Clause</h2>
<blockquote>
<p><strong>Query:</strong> Number of bitcoin transactions per date, sorted by date.</p>
</blockquote>

<img data-src="images/sql9.png" class="r-stretch"></section>
<section class="slide level2">

<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a></a><span class="kw">WITH</span> <span class="dt">time</span> <span class="kw">AS</span> (  </span>
<span id="cb9-2"><a></a>    <span class="kw">SELECT</span> <span class="dt">DATE</span>(block_timestamp) <span class="kw">AS</span> trans_date  </span>
<span id="cb9-3"><a></a>    <span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.crypto_bitcoin.transactions`  </span>
<span id="cb9-4"><a></a>)  </span>
<span id="cb9-5"><a></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(trans_date) <span class="kw">AS</span> transactions, trans_date  </span>
<span id="cb9-6"><a></a><span class="kw">FROM</span> <span class="dt">time</span>  </span>
<span id="cb9-7"><a></a><span class="kw">GROUP</span> <span class="kw">BY</span> trans_date  </span>
<span id="cb9-8"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> trans_date</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

<img data-src="images/sql10.png" class="r-stretch"></section>
<section id="limiting-results-with-limit" class="slide level2">
<h2>Limiting Results with LIMIT</h2>
<ul>
<li>Sometimes you want to return only part of the results. This can be useful for instance when you run queries on the cloud and you want to preview the results before downloading the entire dataset. LIMIT is used for this purpose. It avoids you pay money for bringing back all the results.</li>
</ul>

<img data-src="images/sql11.png" style="width:80.0%" class="r-stretch"></section>
<section id="group-by-operations-by-category" class="slide level2">
<h2>GROUP BY ‚Äì Operations by Category</h2>
<blockquote>
<p><strong>Query:</strong> What is the average no2 pollutant for each city in the US?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a></a><span class="kw">SELECT</span> city, <span class="fu">AVG</span>(<span class="fu">value</span>) <span class="kw">AS</span> avg_value  </span>
<span id="cb10-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb10-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'US'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'no2'</span>  </span>
<span id="cb10-4"><a></a><span class="kw">GROUP</span> <span class="kw">BY</span> city</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><code>GROUP BY city</code></strong>:</p>
<ul>
<li>This groups the results by <strong>city</strong>. For each unique city in the dataset, the query calculates the average NO2 pollutant value based on the rows that belong to that city.</li>
<li>Without <code>GROUP BY</code>, the <code>AVG()</code> function would calculate the average across all rows in the dataset, rather than for each individual city.</li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="images/sql12.png" style="width:90.0%"></p>
</div></div>
</section>
<section id="filtering-categories-with-group-by-and-having" class="slide level2">
<h2>Filtering Categories with GROUP BY and HAVING</h2>
<blockquote>
<p><strong>Query:</strong> Which cities in India have an average no2 pollutant &gt; 50?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb11-1"><a></a><span class="kw">SELECT</span> city, <span class="fu">AVG</span>(<span class="fu">value</span>) <span class="kw">AS</span> avg_value  </span>
<span id="cb11-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.openaq.global_air_quality`  </span>
<span id="cb11-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'IN'</span> <span class="kw">AND</span> pollutant <span class="op">=</span> <span class="st">'no2'</span>  </span>
<span id="cb11-4"><a></a><span class="kw">GROUP</span> <span class="kw">BY</span> city</span>
<span id="cb11-5"><a></a><span class="kw">HAVING</span> avg_value <span class="op">&gt;</span> <span class="dv">50</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<p><img data-src="images/sql13.png" style="width:90.0%"></p>
</div></div>
</section>
<section id="practice-query" class="slide level2">
<h2>Practice Query</h2>
<blockquote>
<p><strong>Query:</strong> What is the average time rent per station of bike share program in San Franciso?</p>
</blockquote>
<p><em>(Look for the San Francisco Bikeshare dataset)</em></p>
<blockquote>
<p><strong>Query:</strong> Which day of the week has the most fatal motor accidents in 2020?</p>
</blockquote>
<p><em>(Look for the NHTSA Traffic Fatalities dataset)</em></p>
</section>
<section id="practice-query---answer-from-chatgpt" class="slide level2">
<h2>Practice Query - Answer from ChatGPT</h2>
<blockquote>
<p><strong>Query:</strong> What is the average time rent per station of bike share program in San Franciso?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><a></a><span class="kw">SELECT</span> stations.name <span class="kw">AS</span> station_name, </span>
<span id="cb12-2"><a></a>       <span class="fu">AVG</span>(trips.duration_sec <span class="op">/</span> <span class="dv">60</span>) <span class="kw">AS</span> avg_rent_time_minutes</span>
<span id="cb12-3"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.san_francisco.bikeshare_trips` <span class="kw">AS</span> trips</span>
<span id="cb12-4"><a></a><span class="kw">JOIN</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.san_francisco.bikeshare_stations` <span class="kw">AS</span> stations</span>
<span id="cb12-5"><a></a><span class="kw">ON</span> trips.start_station_id <span class="op">=</span> stations.station_id</span>
<span id="cb12-6"><a></a><span class="kw">GROUP</span> <span class="kw">BY</span> station_name</span>
<span id="cb12-7"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> avg_rent_time_minutes <span class="kw">DESC</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>It uses the <code>JOIN</code> operation to merge the two tables (we will see <code>JOIN</code> in the next slides). We could simply return the station_id instead.</li>
<li>It uses the <code>bigquery-public-data.san_francisco</code> instead of <code>bigquery-public-data.san_francisco_bikeshare</code> dataset.</li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="images/sql14.png" style="width:90.0%"></p>
</div></div>
</section>
<section id="practice-query---answer-from-chatgpt-1" class="slide level2">
<h2>Practice Query - Answer from ChatGPT</h2>
<blockquote>
<p><strong>Query:</strong> Which day of the week has the most fatal motor accidents in 2020?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb13-1"><a></a><span class="kw">SELECT</span> FORMAT_TIMESTAMP(<span class="st">'%A'</span>, <span class="dt">TIMESTAMP</span>(timestamp_of_crash)) <span class="kw">AS</span> day_of_week,</span>
<span id="cb13-2"><a></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> total_fatalities</span>
<span id="cb13-3"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.nhtsa_traffic_fatalities.accident_2020`</span>
<span id="cb13-4"><a></a><span class="kw">WHERE</span> <span class="fu">EXTRACT</span>(<span class="dt">YEAR</span> <span class="kw">FROM</span> <span class="dt">TIMESTAMP</span>(timestamp_of_crash)) <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb13-5"><a></a><span class="kw">GROUP</span> <span class="kw">BY</span> day_of_week</span>
<span id="cb13-6"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> total_fatalities <span class="kw">DESC</span></span>
<span id="cb13-7"><a></a><span class="kw">LIMIT</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Error in the dataset. ChatGPT is not able to type the correct dataset name (even after trying to correct the prompt).</li>
<li>No need to extract for the year, as the dataset is already filtered for 2020.</li>
<li>It imposes a limit of 1, but it is not necessary.</li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="images/sql15.png" style="width:90.0%"></p>
<ul>
<li>It uses more advanced SQL commands such as <code>FORMAT_TIMESTAMP</code>, <code>TIMESTAMP</code> and <code>EXTRACT</code>. These might not always be available in all SQL databases. <img data-src="images/sql_advanced.png"></li>
</ul>
</div></div>
</section>
<section id="sql-joins" class="slide level2">
<h2>SQL Joins</h2>
<p>Joins allow merging results from different tables. It is required to specify the ‚Äúkey‚Äù linking the tables.</p>

<img data-src="images/join_sql.png" class="r-stretch"></section>
<section id="types-of-joins" class="slide level2">
<h2>Types of Joins</h2>
<ul>
<li><strong>(INNER) JOIN</strong>: Returns records that have matching values in both tables.</li>
<li><strong>LEFT/RIGHT (OUTER) JOIN</strong>: Returns all records from the left/right table and the matched records from the right/left table.</li>
<li><strong>FULL (OUTER) JOIN</strong>: Returns all records when there is a match in either left or right table.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="lecture03_files/figure-revealjs/venn-diagram-1.png" class="quarto-figure quarto-figure-center" style="width:70.0%;height:70.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-inner-join" class="slide level2">
<h2>Example INNER JOIN</h2>
<blockquote>
<p><strong>Query:</strong> Find the top 5 longest bike rides in Austin, including informations about stations.</p>
</blockquote>

<img data-src="images/austin_bikeshare.png" class="r-stretch"><p>Which field name should we use to join the two tables?</p>
</section>
<section id="example-inner-join---option-1" class="slide level2">
<h2>Example INNER JOIN - option 1</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb14-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.austin_bikeshare.bikeshare_trips` <span class="kw">AS</span> A</span>
<span id="cb14-3"><a></a><span class="kw">INNER</span> <span class="kw">JOIN</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.austin_bikeshare.bikeshare_stations` <span class="kw">AS</span> B  </span>
<span id="cb14-4"><a></a><span class="kw">ON</span> A.start_station_id <span class="op">=</span> B.station_id  </span>
<span id="cb14-5"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> duration_minutes <span class="kw">DESC</span>  </span>
<span id="cb14-6"><a></a><span class="kw">LIMIT</span> <span class="dv">5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

<img data-src="images/sql16.png" style="width:90.0%" class="r-stretch"><p>You can simplify the query by using the following syntax:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a></a><span class="kw">JOIN</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.austin_bikeshare.bikeshare_stations` <span class="kw">AS</span> B  </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="example-inner-join---option-2" class="slide level2">
<h2>Example INNER JOIN - option 2</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a></a><span class="kw">SELECT</span> <span class="op">*</span>  </span>
<span id="cb16-2"><a></a><span class="kw">FROM</span> `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.austin_bikeshare.bikeshare_trips` <span class="kw">AS</span> A,</span>
<span id="cb16-3"><a></a>     `bigquery<span class="op">-</span><span class="kw">public</span><span class="op">-</span><span class="kw">data</span>.austin_bikeshare.bikeshare_stations` <span class="kw">AS</span> B</span>
<span id="cb16-4"><a></a><span class="kw">WHERE</span> A.start_station_id <span class="op">=</span> B.station_id  </span>
<span id="cb16-5"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> duration_sec <span class="kw">DESC</span>  </span>
<span id="cb16-6"><a></a><span class="kw">LIMIT</span> <span class="dv">5</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

<img data-src="images/sql16.png" style="width:90.0%" class="r-stretch"></section>
<section id="mini-exercise" class="slide level2">
<h2>Mini-exercise</h2>
<blockquote>
<p><strong>Query:</strong> Which bike start station has the longest duration rides?</p>
</blockquote>
<blockquote>
<p><strong>Query:</strong> How many bikes were reported as stolen?</p>
</blockquote>
</section>
<section id="additional-sql-resources" class="slide level2">
<h2>Additional SQL Resources</h2>
<ul>
<li><a href="https://www.w3schools.com/sql/">SQL Tutorial (W3Schools)</a></li>
<li><a href="https://www.kaggle.com/learn/intro-to-sql">Intro to SQL (Kaggle)</a></li>
<li><a href="https://www.kaggle.com/learn/advanced-sql">Advanced SQL (Kaggle)</a></li>
</ul>
</section>
<section id="connecting-r-to-bigquery" class="slide level2">
<h2>Connecting R to BigQuery</h2>
<p>To connect R to BigQuery, use the <code>bigrquery</code> package:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="co"># Install the bigrquery package</span></span>
<span id="cb17-2"><a></a><span class="fu">install.packages</span>(<span class="st">"bigrquery"</span>)</span>
<span id="cb17-3"><a></a></span>
<span id="cb17-4"><a></a><span class="co"># Load the library and authenticate</span></span>
<span id="cb17-5"><a></a><span class="fu">library</span>(bigrquery)</span>
<span id="cb17-6"><a></a><span class="fu">bq_auth</span>()</span>
<span id="cb17-7"><a></a></span>
<span id="cb17-8"><a></a><span class="co"># Run a query</span></span>
<span id="cb17-9"><a></a>query <span class="ot">&lt;-</span> <span class="st">"SELECT country, pollutant, value </span></span>
<span id="cb17-10"><a></a><span class="st">          FROM `bigquery-public-data.openaq.global_air_quality` </span></span>
<span id="cb17-11"><a></a><span class="st">          WHERE country = 'US'</span></span>
<span id="cb17-12"><a></a><span class="st">          LIMIT 5"</span></span>
<span id="cb17-13"><a></a>result <span class="ot">&lt;-</span> <span class="fu">bq_project_query</span>(<span class="st">"your-project-id"</span>, query)</span>
<span id="cb17-14"><a></a>data <span class="ot">&lt;-</span> <span class="fu">bq_table_download</span>(result)</span>
<span id="cb17-15"><a></a><span class="fu">head</span>(data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  country pollutant       value
1      US        no 0.007021218
2      US        bc 0.410000000
3      US        bc 0.500000000
4      US        bc 2.100000000
5      US        bc 0.160000000</code></pre>
</div>
</div>
</section>
<section id="example---number-of-bitcoin-transactions-over-time" class="slide level2">
<h2>Example - Number of Bitcoin Transactions Over time</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>query <span class="ot">&lt;-</span> <span class="st">"WITH time AS (  </span></span>
<span id="cb19-2"><a></a><span class="st">    SELECT DATE(block_timestamp) AS trans_date  </span></span>
<span id="cb19-3"><a></a><span class="st">    FROM `bigquery-public-data.crypto_bitcoin.transactions`  </span></span>
<span id="cb19-4"><a></a><span class="st">)  </span></span>
<span id="cb19-5"><a></a><span class="st">SELECT COUNT(trans_date) AS transactions, trans_date  </span></span>
<span id="cb19-6"><a></a><span class="st">FROM time  </span></span>
<span id="cb19-7"><a></a><span class="st">GROUP BY trans_date  </span></span>
<span id="cb19-8"><a></a><span class="st">ORDER BY trans_date DESC"</span></span>
<span id="cb19-9"><a></a>result <span class="ot">&lt;-</span> <span class="fu">bq_project_query</span>(<span class="st">"your-project-id"</span>, query)</span>
<span id="cb19-10"><a></a>data <span class="ot">&lt;-</span> <span class="fu">bq_table_download</span>(result)</span>
<span id="cb19-11"><a></a></span>
<span id="cb19-12"><a></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb19-13"><a></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb19-14"><a></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>trans_date, <span class="at">y=</span>transactions)) <span class="sc">+</span></span>
<span id="cb19-15"><a></a>  <span class="fu">geom_line</span>( <span class="at">color=</span><span class="st">"#69b3a2"</span>) <span class="sc">+</span> </span>
<span id="cb19-16"><a></a>  <span class="fu">xlab</span>(<span class="st">"Time"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Number of Transactions"</span>) <span class="sc">+</span></span>
<span id="cb19-17"><a></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb19-18"><a></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>, <span class="at">hjust=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb19-19"><a></a>  <span class="fu">ggtitle</span>(<span class="st">"Number of Bitcoin Transactions Over Time"</span>)</span>
<span id="cb19-20"><a></a>p</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lecture03_files/figure-revealjs/unnamed-chunk-2-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="connecting-python-to-bigquery" class="slide level2">
<h2>Connecting Python to BigQuery</h2>
<p>To connect Python to BigQuery, use the <code>google-cloud-bigquery</code> client.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a></a><span class="co"># TIP: Install once in your env:  pip install google-cloud-bigquery pandas pyarrow</span></span>
<span id="cb20-2"><a></a><span class="co"># Auth options:</span></span>
<span id="cb20-3"><a></a><span class="co">#  - gcloud:  gcloud auth application-default login</span></span>
<span id="cb20-4"><a></a><span class="co">#  - or set GOOGLE_APPLICATION_CREDENTIALS to a service-account JSON</span></span>
<span id="cb20-5"><a></a></span>
<span id="cb20-6"><a></a><span class="im">from</span> google.cloud <span class="im">import</span> bigquery</span>
<span id="cb20-7"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb20-8"><a></a></span>
<span id="cb20-9"><a></a>client <span class="op">=</span> bigquery.Client(project<span class="op">=</span><span class="st">"your-project-id"</span>)</span>
<span id="cb20-10"><a></a></span>
<span id="cb20-11"><a></a><span class="co"># Run a query</span></span>
<span id="cb20-12"><a></a>query <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb20-13"><a></a><span class="st">SELECT country, pollutant, value</span></span>
<span id="cb20-14"><a></a><span class="st">FROM `bigquery-public-data.openaq.global_air_quality`</span></span>
<span id="cb20-15"><a></a><span class="st">WHERE country = 'US'</span></span>
<span id="cb20-16"><a></a><span class="st">LIMIT 5</span></span>
<span id="cb20-17"><a></a><span class="st">"""</span></span>
<span id="cb20-18"><a></a>df <span class="op">=</span> client.query(query).to_dataframe()</span>
<span id="cb20-19"><a></a>df.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="overview-of-bigquery" class="slide level2">
<h2>Overview of BigQuery</h2>
<ul>
<li><p><strong>BigQuery</strong> is a highly scalable data warehouse designed to store and analyze terabytes of data using SQL.</p></li>
<li><p><strong>Benefits</strong>:</p>
<ul>
<li>High-speed querying over large datasets.</li>
<li>Scalable storage and computing power.</li>
<li>Integration with public datasets for broader analysis.</li>
</ul></li>
</ul>
</section>
<section id="key-features-of-bigquery" class="slide level2">
<h2>Key Features of BigQuery</h2>
<ul>
<li><strong>Serverless architecture</strong>: You don‚Äôt manage infrastructure, it scales automatically.</li>
<li><strong>SQL-based queries</strong>: Standard SQL allows you to extract, transform, and analyze data.</li>
<li><strong>Built-in machine learning</strong>: You can train and deploy machine learning models directly within BigQuery using SQL.</li>
<li><strong>Integration with R and Python</strong>: Use the <code>bigrquery</code> package to connect R with BigQuery or <code>google-cloud-bigquery</code> for Python.</li>
</ul>
</section>
<section id="local-sql-practice" class="slide level2">
<h2>Local SQL practice</h2>
</section>
<section id="mini-database-sqlite" class="slide level2">
<h2>Mini database (SQLite)</h2>
<p>We will create a small <strong>customers‚Äìorders</strong> database to practice.</p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">R ‚Äî create &amp; seed</a></li><li><a href="#tabset-1-2">Python ‚Äî create &amp; seed</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">library</span>(DBI); <span class="fu">library</span>(RSQLite)</span>
<span id="cb21-2"><a></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="fu">SQLite</span>(), <span class="st">":memory:"</span>)</span>
<span id="cb21-3"><a></a></span>
<span id="cb21-4"><a></a>DBI<span class="sc">::</span><span class="fu">dbExecute</span>(con, <span class="st">"</span></span>
<span id="cb21-5"><a></a><span class="st">CREATE TABLE customers (</span></span>
<span id="cb21-6"><a></a><span class="st">  customer_id INTEGER PRIMARY KEY,</span></span>
<span id="cb21-7"><a></a><span class="st">  name TEXT NOT NULL,</span></span>
<span id="cb21-8"><a></a><span class="st">  country TEXT NOT NULL</span></span>
<span id="cb21-9"><a></a><span class="st">);</span></span>
<span id="cb21-10"><a></a><span class="st">"</span>)</span>
<span id="cb21-11"><a></a>DBI<span class="sc">::</span><span class="fu">dbExecute</span>(con, <span class="st">"</span></span>
<span id="cb21-12"><a></a><span class="st">CREATE TABLE orders (</span></span>
<span id="cb21-13"><a></a><span class="st">  order_id INTEGER PRIMARY KEY,</span></span>
<span id="cb21-14"><a></a><span class="st">  customer_id INTEGER NOT NULL,</span></span>
<span id="cb21-15"><a></a><span class="st">  order_date TEXT NOT NULL, -- ISO8601</span></span>
<span id="cb21-16"><a></a><span class="st">  amount REAL NOT NULL,</span></span>
<span id="cb21-17"><a></a><span class="st">  FOREIGN KEY(customer_id) REFERENCES customers(customer_id)</span></span>
<span id="cb21-18"><a></a><span class="st">);</span></span>
<span id="cb21-19"><a></a><span class="st">"</span>)</span>
<span id="cb21-20"><a></a></span>
<span id="cb21-21"><a></a>DBI<span class="sc">::</span><span class="fu">dbWriteTable</span>(con, <span class="st">"customers"</span>,</span>
<span id="cb21-22"><a></a>  <span class="fu">data.frame</span>(<span class="at">customer_id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb21-23"><a></a>             <span class="at">name=</span><span class="fu">c</span>(<span class="st">"Ada"</span>,<span class="st">"Bruno"</span>,<span class="st">"Chlo√©"</span>,<span class="st">"Dinesh"</span>,<span class="st">"Elena"</span>),</span>
<span id="cb21-24"><a></a>             <span class="at">country=</span><span class="fu">c</span>(<span class="st">"CH"</span>,<span class="st">"FR"</span>,<span class="st">"CH"</span>,<span class="st">"IN"</span>,<span class="st">"US"</span>)),</span>
<span id="cb21-25"><a></a>  <span class="at">append=</span><span class="cn">TRUE</span>)</span>
<span id="cb21-26"><a></a></span>
<span id="cb21-27"><a></a>DBI<span class="sc">::</span><span class="fu">dbWriteTable</span>(con, <span class="st">"orders"</span>,</span>
<span id="cb21-28"><a></a>  <span class="fu">data.frame</span>(<span class="at">order_id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb21-29"><a></a>             <span class="at">customer_id=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>),</span>
<span id="cb21-30"><a></a>             <span class="at">order_date=</span><span class="fu">as.character</span>(<span class="fu">as.Date</span>(<span class="st">"2025-09-20"</span>) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">9</span>)),</span>
<span id="cb21-31"><a></a>             <span class="at">amount=</span><span class="fu">c</span>(<span class="dv">120</span>,<span class="dv">75</span>,<span class="dv">300</span>,<span class="dv">42</span>,<span class="dv">88</span>,<span class="dv">150</span>,<span class="dv">60</span>,<span class="dv">500</span>,<span class="dv">20</span>,<span class="dv">220</span>)),</span>
<span id="cb21-32"><a></a>  <span class="at">append=</span><span class="cn">TRUE</span>)</span>
<span id="cb21-33"><a></a></span>
<span id="cb21-34"><a></a>DBI<span class="sc">::</span><span class="fu">dbListTables</span>(con)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="tabset-1-2">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a></a><span class="im">import</span> sqlite3, pandas <span class="im">as</span> pd, datetime <span class="im">as</span> dt</span>
<span id="cb22-2"><a></a>con <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">":memory:"</span>)</span>
<span id="cb22-3"><a></a>cur <span class="op">=</span> con.cursor()</span>
<span id="cb22-4"><a></a>cur.execute(<span class="st">"""</span></span>
<span id="cb22-5"><a></a><span class="st">CREATE TABLE customers (</span></span>
<span id="cb22-6"><a></a><span class="st">  customer_id INTEGER PRIMARY KEY,</span></span>
<span id="cb22-7"><a></a><span class="st">  name TEXT NOT NULL,</span></span>
<span id="cb22-8"><a></a><span class="st">  country TEXT NOT NULL</span></span>
<span id="cb22-9"><a></a><span class="st">);</span></span>
<span id="cb22-10"><a></a><span class="st">"""</span>)</span>
<span id="cb22-11"><a></a>cur.execute(<span class="st">"""</span></span>
<span id="cb22-12"><a></a><span class="st">CREATE TABLE orders (</span></span>
<span id="cb22-13"><a></a><span class="st">  order_id INTEGER PRIMARY KEY,</span></span>
<span id="cb22-14"><a></a><span class="st">  customer_id INTEGER NOT NULL,</span></span>
<span id="cb22-15"><a></a><span class="st">  order_date TEXT NOT NULL,</span></span>
<span id="cb22-16"><a></a><span class="st">  amount REAL NOT NULL,</span></span>
<span id="cb22-17"><a></a><span class="st">  FOREIGN KEY(customer_id) REFERENCES customers(customer_id)</span></span>
<span id="cb22-18"><a></a><span class="st">);</span></span>
<span id="cb22-19"><a></a><span class="st">"""</span>)</span>
<span id="cb22-20"><a></a></span>
<span id="cb22-21"><a></a>customers <span class="op">=</span> pd.DataFrame({</span>
<span id="cb22-22"><a></a>  <span class="st">"customer_id"</span>: [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>],</span>
<span id="cb22-23"><a></a>  <span class="st">"name"</span>: [<span class="st">"Ada"</span>,<span class="st">"Bruno"</span>,<span class="st">"Chlo√©"</span>,<span class="st">"Dinesh"</span>,<span class="st">"Elena"</span>],</span>
<span id="cb22-24"><a></a>  <span class="st">"country"</span>: [<span class="st">"CH"</span>,<span class="st">"FR"</span>,<span class="st">"CH"</span>,<span class="st">"IN"</span>,<span class="st">"US"</span>]</span>
<span id="cb22-25"><a></a>})</span>
<span id="cb22-26"><a></a>orders <span class="op">=</span> pd.DataFrame({</span>
<span id="cb22-27"><a></a>  <span class="st">"order_id"</span>: <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">11</span>),</span>
<span id="cb22-28"><a></a>  <span class="st">"customer_id"</span>: [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>],</span>
<span id="cb22-29"><a></a>  <span class="st">"order_date"</span>: [(dt.date(<span class="dv">2025</span>,<span class="dv">9</span>,<span class="dv">20</span>)<span class="op">+</span>dt.timedelta(days<span class="op">=</span>d)).isoformat() <span class="cf">for</span> d <span class="kw">in</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">9</span>]],</span>
<span id="cb22-30"><a></a>  <span class="st">"amount"</span>: [<span class="dv">120</span>,<span class="dv">75</span>,<span class="dv">300</span>,<span class="dv">42</span>,<span class="dv">88</span>,<span class="dv">150</span>,<span class="dv">60</span>,<span class="dv">500</span>,<span class="dv">20</span>,<span class="dv">220</span>]</span>
<span id="cb22-31"><a></a>})</span>
<span id="cb22-32"><a></a>customers.to_sql(<span class="st">"customers"</span>, con, if_exists<span class="op">=</span><span class="st">"append"</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb22-33"><a></a>orders.to_sql(<span class="st">"orders"</span>, con, if_exists<span class="op">=</span><span class="st">"append"</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb22-34"><a></a>con.execute(<span class="st">"SELECT name FROM sqlite_master WHERE type='table'"</span>).fetchall()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section>
<section id="sql-basics-1" class="slide level2">
<h2>SQL basics</h2>
<p><strong>SELECT</strong> specific columns ‚Üí <strong>WHERE</strong> to filter ‚Üí <strong>ORDER BY</strong> to sort ‚Üí <strong>LIMIT</strong> to preview.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><a></a><span class="kw">SELECT</span> name, country</span>
<span id="cb23-2"><a></a><span class="kw">FROM</span> customers</span>
<span id="cb23-3"><a></a><span class="kw">WHERE</span> country <span class="op">=</span> <span class="st">'CH'</span></span>
<span id="cb23-4"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> name <span class="kw">ASC</span></span>
<span id="cb23-5"><a></a><span class="kw">LIMIT</span> <span class="dv">5</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<blockquote>
<p>Tip: Start with <code>SELECT * ... LIMIT 5</code> to inspect shape without scanning the full table.</p>
</blockquote>
</section>
<section id="aggregation-group-by-having" class="slide level2">
<h2>Aggregation: GROUP BY &amp; HAVING</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb24-1"><a></a><span class="co">-- Average order amount per country</span></span>
<span id="cb24-2"><a></a><span class="kw">SELECT</span> c.country, <span class="fu">ROUND</span>(<span class="fu">AVG</span>(o.amount),<span class="dv">2</span>) <span class="kw">AS</span> avg_amount, <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> n_orders</span>
<span id="cb24-3"><a></a><span class="kw">FROM</span> orders o</span>
<span id="cb24-4"><a></a><span class="kw">JOIN</span> customers c <span class="kw">ON</span> o.customer_id <span class="op">=</span> c.customer_id</span>
<span id="cb24-5"><a></a><span class="kw">GROUP</span> <span class="kw">BY</span> c.country</span>
<span id="cb24-6"><a></a><span class="kw">HAVING</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="op">&gt;=</span> <span class="dv">2</span></span>
<span id="cb24-7"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> avg_amount <span class="kw">DESC</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Rules:</strong> every selected non-aggregated column must appear in <code>GROUP BY</code>. Use <code>HAVING</code> to filter <strong>groups</strong>.</p>
</section>
<section id="joins-visual-intuition" class="slide level2">
<h2>JOINS (visual intuition)</h2>
<ul>
<li><strong>INNER JOIN</strong>: only matching rows</li>
<li><strong>LEFT JOIN</strong>: all left + matches from right</li>
<li><strong>FULL OUTER JOIN</strong>: all rows from both (not in SQLite; emulate with <code>UNION</code>)</li>
<li><strong>JOIN keys</strong> should be indexed in larger DBs; ensure uniqueness/NOT NULL on IDs</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb25-1"><a></a><span class="co">-- List each order with its customer name (INNER JOIN)</span></span>
<span id="cb25-2"><a></a><span class="kw">SELECT</span> o.order_id, o.order_date, o.amount, c.name</span>
<span id="cb25-3"><a></a><span class="kw">FROM</span> orders o</span>
<span id="cb25-4"><a></a><span class="kw">INNER</span> <span class="kw">JOIN</span> customers c <span class="kw">ON</span> o.customer_id <span class="op">=</span> c.customer_id</span>
<span id="cb25-5"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span> o.order_id;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb26-1"><a></a><span class="co">-- Customers without orders (LEFT JOIN + NULL check)</span></span>
<span id="cb26-2"><a></a><span class="kw">SELECT</span> c.customer_id, c.name</span>
<span id="cb26-3"><a></a><span class="kw">FROM</span> customers c</span>
<span id="cb26-4"><a></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> orders o <span class="kw">ON</span> o.customer_id <span class="op">=</span> c.customer_id</span>
<span id="cb26-5"><a></a><span class="kw">WHERE</span> o.order_id <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="accessing-sql-from-r" class="slide level2">
<h2>Accessing SQL from R</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">DBI + dplyr</a></li><li><a href="#tabset-2-2">Raw SQL + <code>dbGetQuery</code></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a><span class="fu">library</span>(DBI); <span class="fu">library</span>(dplyr)</span>
<span id="cb27-2"><a></a><span class="co"># con from previous slide</span></span>
<span id="cb27-3"><a></a><span class="fu">tbl</span>(con, <span class="st">"orders"</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-4"><a></a>  <span class="fu">inner_join</span>(<span class="fu">tbl</span>(con, <span class="st">"customers"</span>), <span class="at">by =</span> <span class="fu">join_by</span>(customer_id)) <span class="sc">|&gt;</span></span>
<span id="cb27-5"><a></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb27-6"><a></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">total =</span> <span class="fu">sum</span>(amount), <span class="at">.groups=</span><span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-7"><a></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total)) <span class="sc">|&gt;</span></span>
<span id="cb27-8"><a></a>  <span class="fu">collect</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="tabset-2-2">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>DBI<span class="sc">::</span><span class="fu">dbGetQuery</span>(con, <span class="st">"SELECT COUNT(*) AS n FROM orders WHERE amount &gt; 100;"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section>
<section id="accessing-sql-from-python" class="slide level2">
<h2>Accessing SQL from Python</h2>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">pandas + SQL</a></li><li><a href="#tabset-3-2">SQLAlchemy engine (optional)</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb29-2"><a></a>q <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb29-3"><a></a><span class="st">SELECT c.country, COUNT(*) AS n, SUM(o.amount) AS total</span></span>
<span id="cb29-4"><a></a><span class="st">FROM orders o JOIN customers c ON o.customer_id=c.customer_id</span></span>
<span id="cb29-5"><a></a><span class="st">GROUP BY c.country ORDER BY total DESC</span></span>
<span id="cb29-6"><a></a><span class="st">"""</span></span>
<span id="cb29-7"><a></a>pd.read_sql_query(q, con)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="tabset-3-2">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a></a><span class="im">from</span> sqlalchemy <span class="im">import</span> create_engine</span>
<span id="cb30-2"><a></a>engine <span class="op">=</span> create_engine(<span class="st">"sqlite+pysqlite:///:memory:"</span>, echo<span class="op">=</span><span class="va">False</span>, future<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-3"><a></a><span class="co"># (Recreate and load tables as above, then use engine.connect())</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section>
<section id="inclass-miniexercises" class="slide level2">
<h2>In‚Äëclass mini‚Äëexercises</h2>
<ol type="1">
<li><strong>Warm‚Äëup:</strong> Write a query to list CH customers ordered by name. Add <code>LIMIT 3</code>.</li>
<li><strong>Aggregation:</strong> Average order amount per customer; return top 3 customers.</li>
<li><strong>Join logic:</strong> Find customers with <strong>no orders</strong> using a <code>LEFT JOIN</code>.</li>
</ol>
</section>
<section id="cheatsheet" class="slide level2">
<h2>Cheat‚Äësheet</h2>
<ul>
<li><code>SELECT col1, col2 FROM t WHERE cond ORDER BY col1 DESC LIMIT n;</code></li>
<li><code>JOIN</code>: <code>A JOIN B ON A.key = B.key</code> ¬∑ left join keeps all of A</li>
<li>Aggregation: <code>GROUP BY cols</code> + <code>HAVING</code> to filter groups</li>
<li>R: <code>DBI::dbGetQuery(con, sql)</code>; Python: <code>pd.read_sql_query(sql, con)</code></li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="api" class="title-slide slide level1 center">
<h1>API</h1>

</section>
<section id="openweathermap-current-weather" class="slide level2">
<h2>OpenWeatherMap (current weather)</h2>
<ol type="1">
<li><p>Create a free key (account on openweathermap.org).</p></li>
<li><p>Try this URL in your browser (replace <code>YOUR_KEY</code>):</p></li>
</ol>
<pre><code>https://api.openweathermap.org/data/2.5/weather?q=Lausanne&amp;units=metric&amp;appid=YOUR_KEY</code></pre>
<ol start="3" type="1">
<li>Look for fields like <code>main.temp</code>, <code>weather.description</code>, <code>wind.speed</code> in the JSON.</li>
</ol>
<aside class="notes">
<p>If the JSON is hard to read, use the browser‚Äôs built‚Äëin JSON viewer or a JSON‚Äëformatting extension.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="r-openweathermap-json-to-tibble" class="slide level2">
<h2>R: OpenWeatherMap ‚Üí JSON to tibble</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="co"># packages</span></span>
<span id="cb32-2"><a></a><span class="fu">library</span>(httr2)</span>
<span id="cb32-3"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb32-4"><a></a></span>
<span id="cb32-5"><a></a><span class="co"># store your key in an env var before class: Sys.setenv(OPENWEATHERMAP_API_KEY="...")</span></span>
<span id="cb32-6"><a></a>okey <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"OPENWEATHERMAP_API_KEY"</span>)</span>
<span id="cb32-7"><a></a></span>
<span id="cb32-8"><a></a>resp <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://api.openweathermap.org/data/2.5/weather"</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-9"><a></a>  <span class="fu">req_url_query</span>(<span class="at">q =</span> <span class="st">"Lausanne"</span>, <span class="at">units =</span> <span class="st">"metric"</span>, <span class="at">appid =</span> okey) <span class="sc">|&gt;</span></span>
<span id="cb32-10"><a></a>  <span class="fu">req_perform</span>()</span>
<span id="cb32-11"><a></a></span>
<span id="cb32-12"><a></a>wx <span class="ot">&lt;-</span> <span class="fu">resp_body_json</span>(resp, <span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-13"><a></a></span>
<span id="cb32-14"><a></a><span class="co"># extract a compact summary row</span></span>
<span id="cb32-15"><a></a>wx_row <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb32-16"><a></a>  <span class="at">city        =</span> wx<span class="sc">$</span>name,</span>
<span id="cb32-17"><a></a>  <span class="at">country     =</span> wx<span class="sc">$</span>sys<span class="sc">$</span>country,</span>
<span id="cb32-18"><a></a>  <span class="at">temperature =</span> wx<span class="sc">$</span>main<span class="sc">$</span>temp,</span>
<span id="cb32-19"><a></a>  <span class="at">feels_like  =</span> wx<span class="sc">$</span>main<span class="sc">$</span>feels_like,</span>
<span id="cb32-20"><a></a>  <span class="at">humidity    =</span> wx<span class="sc">$</span>main<span class="sc">$</span>humidity,</span>
<span id="cb32-21"><a></a>  <span class="at">wind_ms     =</span> wx<span class="sc">$</span>wind<span class="sc">$</span>speed,</span>
<span id="cb32-22"><a></a>  <span class="at">condition   =</span> wx<span class="sc">$</span>weather<span class="sc">$</span>description,</span>
<span id="cb32-23"><a></a>  <span class="at">timestamp   =</span> <span class="fu">as.POSIXct</span>(wx<span class="sc">$</span>dt, <span class="at">origin =</span> <span class="st">"1970-01-01"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb32-24"><a></a>)</span>
<span id="cb32-25"><a></a>wx_row</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 8
  city     country temperature feels_like humidity wind_ms condition      
  &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;    &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;          
1 Lausanne CH             11.7       10.8       70    0.72 overcast clouds
# ‚Ñπ 1 more variable: timestamp &lt;dttm&gt;</code></pre>
</div>
</div>
<aside class="notes">
<p>Global <code>execute: { eval: false }</code> prevents live HTTP calls during render. Run interactively if needed.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="python-openweathermap-json-to-dataframe" class="slide level2">
<h2>Python: OpenWeatherMap ‚Üí JSON to DataFrame</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a></a><span class="im">import</span> os, requests, pandas <span class="im">as</span> pd</span>
<span id="cb34-2"><a></a></span>
<span id="cb34-3"><a></a>okey <span class="op">=</span> os.environ.get(<span class="st">"OPENWEATHERMAP_API_KEY"</span>)</span>
<span id="cb34-4"><a></a>params <span class="op">=</span> {<span class="st">"q"</span>: <span class="st">"Lausanne"</span>, <span class="st">"units"</span>: <span class="st">"metric"</span>, <span class="st">"appid"</span>: okey}</span>
<span id="cb34-5"><a></a>r <span class="op">=</span> requests.get(<span class="st">"https://api.openweathermap.org/data/2.5/weather"</span>, params<span class="op">=</span>params)</span>
<span id="cb34-6"><a></a>wx <span class="op">=</span> r.json()</span>
<span id="cb34-7"><a></a>row <span class="op">=</span> {</span>
<span id="cb34-8"><a></a>    <span class="st">"city"</span>: wx.get(<span class="st">"name"</span>),</span>
<span id="cb34-9"><a></a>    <span class="st">"country"</span>: wx.get(<span class="st">"sys"</span>, {}).get(<span class="st">"country"</span>),</span>
<span id="cb34-10"><a></a>    <span class="st">"temperature"</span>: wx.get(<span class="st">"main"</span>, {}).get(<span class="st">"temp"</span>),</span>
<span id="cb34-11"><a></a>    <span class="st">"feels_like"</span>: wx.get(<span class="st">"main"</span>, {}).get(<span class="st">"feels_like"</span>),</span>
<span id="cb34-12"><a></a>    <span class="st">"humidity"</span>: wx.get(<span class="st">"main"</span>, {}).get(<span class="st">"humidity"</span>),</span>
<span id="cb34-13"><a></a>    <span class="st">"wind_ms"</span>: wx.get(<span class="st">"wind"</span>, {}).get(<span class="st">"speed"</span>),</span>
<span id="cb34-14"><a></a>    <span class="st">"condition"</span>: (wx.get(<span class="st">"weather"</span>, {}).get(<span class="st">"description"</span>),</span>
<span id="cb34-15"><a></a>}</span>
<span id="cb34-16"><a></a>pd.DataFrame([row])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="alpha-vantage-stocks" class="slide level2">
<h2>Alpha Vantage (stocks)</h2>
<ul>
<li>Uses an API key. <strong>Demo key</strong> available for specific symbols.</li>
<li>Paste in your browser (works without signing up):</li>
</ul>
<pre><code>https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&amp;symbol=MSFT&amp;apikey=demo</code></pre>
<ul>
<li>The JSON contains a nested object <code>Time Series (Daily)</code> with open, high, low, close, volume by date.</li>
</ul>
<aside class="notes">
<p>If the demo key is throttled, retry after ~1 min or switch to <code>IBM</code> symbol.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="r-alpha-vantage-tidy-daily-prices" class="slide level2">
<h2>R: Alpha Vantage ‚Üí tidy daily prices</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="fu">library</span>(httr2)</span>
<span id="cb36-2"><a></a><span class="fu">library</span>(purrr)</span>
<span id="cb36-3"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb36-4"><a></a></span>
<span id="cb36-5"><a></a>akey <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"ALPHAVANTAGE_API_KEY"</span>, <span class="at">unset =</span> <span class="st">"demo"</span>)</span>
<span id="cb36-6"><a></a>resp <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://www.alphavantage.co/query"</span>) <span class="sc">|&gt;</span></span>
<span id="cb36-7"><a></a>  <span class="fu">req_url_query</span>(<span class="st">`</span><span class="at">function</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"TIME_SERIES_DAILY"</span>, <span class="at">symbol =</span> <span class="st">"MSFT"</span>, <span class="at">apikey =</span> akey) <span class="sc">|&gt;</span></span>
<span id="cb36-8"><a></a>  <span class="fu">req_perform</span>()</span>
<span id="cb36-9"><a></a>js <span class="ot">&lt;-</span> <span class="fu">resp_body_json</span>(resp, <span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-10"><a></a></span>
<span id="cb36-11"><a></a>daily <span class="ot">&lt;-</span> js[[<span class="st">"Time Series (Daily)"</span>]]</span>
<span id="cb36-12"><a></a>prices <span class="ot">&lt;-</span> <span class="fu">imap_dfr</span>(daily, <span class="sc">~</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb36-13"><a></a>  <span class="at">date   =</span> <span class="fu">as.Date</span>(.y),</span>
<span id="cb36-14"><a></a>  <span class="at">open   =</span> <span class="fu">as.numeric</span>(.x[[<span class="st">"1. open"</span>]]),</span>
<span id="cb36-15"><a></a>  <span class="at">high   =</span> <span class="fu">as.numeric</span>(.x[[<span class="st">"2. high"</span>]]),</span>
<span id="cb36-16"><a></a>  <span class="at">low    =</span> <span class="fu">as.numeric</span>(.x[[<span class="st">"3. low"</span>]]),</span>
<span id="cb36-17"><a></a>  <span class="at">close  =</span> <span class="fu">as.numeric</span>(.x[[<span class="st">"4. close"</span>]]),</span>
<span id="cb36-18"><a></a>  <span class="at">volume =</span> <span class="fu">as.numeric</span>(.x[[<span class="st">"5. volume"</span>]])</span>
<span id="cb36-19"><a></a>)) <span class="sc">|&gt;</span></span>
<span id="cb36-20"><a></a>  <span class="fu">arrange</span>(date)</span>
<span id="cb36-21"><a></a>prices</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 √ó 6
   date        open  high   low close   volume
   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
 1 2025-06-16  475.  481.  475   479. 15626104
 2 2025-06-17  475.  479.  474.  478. 15414128
 3 2025-06-18  478   481   474.  480. 17526452
 4 2025-06-20  482.  483.  477.  477. 37576206
 5 2025-06-23  478.  488.  473.  486  24863952
 6 2025-06-24  489.  492.  487.  490. 22305642
 7 2025-06-25  492.  495.  489.  492. 17495099
 8 2025-06-26  493.  498.  493.  497. 21578853
 9 2025-06-27  498.  499.  493.  496. 34539236
10 2025-06-30  497.  501.  495.  497. 28368991
# ‚Ñπ 90 more rows</code></pre>
</div>
</div>
</section>
<section id="python-alpha-vantage-tidy-daily-prices" class="slide level2">
<h2>Python: Alpha Vantage ‚Üí tidy daily prices</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a></a><span class="im">import</span> os, requests, pandas <span class="im">as</span> pd</span>
<span id="cb38-2"><a></a>akey <span class="op">=</span> os.environ.get(<span class="st">"ALPHAVANTAGE_API_KEY"</span>, <span class="st">"demo"</span>)</span>
<span id="cb38-3"><a></a>params <span class="op">=</span> {<span class="st">"function"</span>: <span class="st">"TIME_SERIES_DAILY"</span>, <span class="st">"symbol"</span>: <span class="st">"MSFT"</span>, <span class="st">"apikey"</span>: akey}</span>
<span id="cb38-4"><a></a>r <span class="op">=</span> requests.get(<span class="st">"https://www.alphavantage.co/query"</span>, params<span class="op">=</span>params)</span>
<span id="cb38-5"><a></a>js <span class="op">=</span> r.json()</span>
<span id="cb38-6"><a></a>daily <span class="op">=</span> js.get(<span class="st">"Time Series (Daily)"</span>, {})</span>
<span id="cb38-7"><a></a>df <span class="op">=</span> (pd.DataFrame(daily).T</span>
<span id="cb38-8"><a></a>        .rename(columns<span class="op">=</span>{</span>
<span id="cb38-9"><a></a>            <span class="st">"1. open"</span>:<span class="st">"open"</span>,<span class="st">"2. high"</span>:<span class="st">"high"</span>,<span class="st">"3. low"</span>:<span class="st">"low"</span>,</span>
<span id="cb38-10"><a></a>            <span class="st">"4. close"</span>:<span class="st">"close"</span>,<span class="st">"5. volume"</span>:<span class="st">"volume"</span></span>
<span id="cb38-11"><a></a>        })</span>
<span id="cb38-12"><a></a>        .reset_index(names<span class="op">=</span><span class="st">"date"</span>))</span>
<span id="cb38-13"><a></a>df[<span class="st">"date"</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">"date"</span>]).dt.date</span>
<span id="cb38-14"><a></a>df.sort_values(<span class="st">"date"</span>).head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="omdb-movies" class="slide level2">
<h2>OMDb (movies)</h2>
<p>Search for a title + year (replace <code>YOUR_KEY</code>):</p>
<pre><code>https://www.omdbapi.com/?apikey=YOUR_KEY&amp;s=titanic&amp;y=1997</code></pre>
<p>Then open details by IMDb id (Titanic):</p>
<pre><code>https://www.omdbapi.com/?apikey=YOUR_KEY&amp;i=tt0120338</code></pre>
<p>Look for fields like <code>Title</code>, <code>Year</code>, <code>Genre</code>, <code>Director</code>, <code>imdbRating</code>.</p>
</section>
<section id="r-omdb-search-details" class="slide level2">
<h2>R: OMDb search + details</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a><span class="fu">library</span>(httr2)</span>
<span id="cb41-2"><a></a></span>
<span id="cb41-3"><a></a>mkey <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"OMDB_API_KEY"</span>)</span>
<span id="cb41-4"><a></a><span class="co"># Search first</span></span>
<span id="cb41-5"><a></a>s <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://www.omdbapi.com/"</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-6"><a></a>  <span class="fu">req_url_query</span>(<span class="at">apikey =</span> mkey, <span class="at">s =</span> <span class="st">"titanic"</span>, <span class="at">y =</span> <span class="dv">1997</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-7"><a></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span></span>
<span id="cb41-8"><a></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-9"><a></a></span>
<span id="cb41-10"><a></a><span class="fu">head</span>(s<span class="sc">$</span>Search)</span>
<span id="cb41-11"><a></a></span>
<span id="cb41-12"><a></a><span class="co"># Then fetch details by IMDb id</span></span>
<span id="cb41-13"><a></a>movie <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://www.omdbapi.com/"</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-14"><a></a>  <span class="fu">req_url_query</span>(<span class="at">apikey =</span> mkey, <span class="at">i =</span> <span class="st">"tt0120338"</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-15"><a></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span></span>
<span id="cb41-16"><a></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-17"><a></a></span>
<span id="cb41-18"><a></a><span class="fu">unlist</span>(movie[<span class="fu">c</span>(<span class="st">"Title"</span>,<span class="st">"Year"</span>,<span class="st">"Genre"</span>,<span class="st">"Director"</span>,<span class="st">"imdbRating"</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="python-omdb-search-details" class="slide level2">
<h2>Python: OMDb search + details</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a></a><span class="im">import</span> os, requests, pandas <span class="im">as</span> pd</span>
<span id="cb42-2"><a></a>mkey <span class="op">=</span> os.environ.get(<span class="st">"OMDB_API_KEY"</span>)</span>
<span id="cb42-3"><a></a></span>
<span id="cb42-4"><a></a><span class="co"># Search</span></span>
<span id="cb42-5"><a></a>s <span class="op">=</span> requests.get(<span class="st">"https://www.omdbapi.com/"</span>, params<span class="op">=</span>{<span class="st">"apikey"</span>: mkey, <span class="st">"s"</span>: <span class="st">"titanic"</span>, <span class="st">"y"</span>: <span class="dv">1997</span>}).json()</span>
<span id="cb42-6"><a></a>pd.DataFrame(s.get(<span class="st">"Search"</span>, []))</span>
<span id="cb42-7"><a></a></span>
<span id="cb42-8"><a></a><span class="co"># Details</span></span>
<span id="cb42-9"><a></a>movie <span class="op">=</span> requests.get(<span class="st">"https://www.omdbapi.com/"</span>, params<span class="op">=</span>{<span class="st">"apikey"</span>: mkey, <span class="st">"i"</span>: <span class="st">"tt0120338"</span>}).json()</span>
<span id="cb42-10"><a></a>{ k: movie.get(k) <span class="cf">for</span> k <span class="kw">in</span> [<span class="st">"Title"</span>,<span class="st">"Year"</span>,<span class="st">"Genre"</span>,<span class="st">"Director"</span>,<span class="st">"imdbRating"</span>] }</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="wikipedia-pageviews" class="slide level2">
<h2>Wikipedia pageviews</h2>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">R</a></li><li><a href="#tabset-4-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a><span class="fu">library</span>(pageviews)</span>
<span id="cb43-2"><a></a></span>
<span id="cb43-3"><a></a><span class="fu">top_articles</span>(<span class="st">"en.wikipedia"</span>,</span>
<span id="cb43-4"><a></a>             <span class="at">start =</span> (<span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(article, views) <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a></a>  dplyr<span class="sc">::</span><span class="fu">top_n</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a></a><span class="im">import</span> requests, datetime</span>
<span id="cb44-2"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb44-3"><a></a></span>
<span id="cb44-4"><a></a>yesterday <span class="op">=</span> (datetime.date.today() <span class="op">-</span> datetime.timedelta(days<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb44-5"><a></a>url <span class="op">=</span> (</span>
<span id="cb44-6"><a></a>    <span class="ss">f"https://wikimedia.org/api/rest_v1/metrics/pageviews/top/"</span></span>
<span id="cb44-7"><a></a>    <span class="ss">f"en.wikipedia/all-access/</span><span class="sc">{</span>yesterday<span class="sc">.</span>year<span class="sc">}</span><span class="ss">/</span><span class="sc">{</span>yesterday<span class="sc">:</span><span class="op">%</span>m<span class="sc">}</span><span class="ss">/</span><span class="sc">{</span>yesterday<span class="sc">:</span><span class="op">%</span>d<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb44-8"><a></a>)</span>
<span id="cb44-9"><a></a>resp <span class="op">=</span> requests.get(url)</span>
<span id="cb44-10"><a></a>items <span class="op">=</span> resp.json()[<span class="st">"items"</span>][<span class="dv">0</span>][<span class="st">"articles"</span>]</span>
<span id="cb44-11"><a></a><span class="co"># Build DataFrame and keep top 10</span></span>
<span id="cb44-12"><a></a>(df <span class="op">:=</span> pd.DataFrame(items))[[<span class="st">'article'</span>,<span class="st">'views'</span>]].head(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="translation-with-deepl" class="slide level2">
<h2>Translation with Deepl</h2>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">R</a></li><li><a href="#tabset-5-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="fu">library</span>(deeplr)</span>
<span id="cb45-2"><a></a>deeplr<span class="sc">::</span><span class="fu">translate2</span>(</span>
<span id="cb45-3"><a></a>  <span class="at">text =</span> <span class="st">"Mais quelle bonne traduction nom d'une pipe!"</span>,</span>
<span id="cb45-4"><a></a>  <span class="at">target_lang =</span> <span class="st">"EN"</span>,</span>
<span id="cb45-5"><a></a>  <span class="at">auth_key =</span> my_key</span>
<span id="cb45-6"><a></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-5-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a></a><span class="im">import</span> os</span>
<span id="cb46-2"><a></a><span class="cf">try</span>:</span>
<span id="cb46-3"><a></a>    <span class="im">import</span> deepl</span>
<span id="cb46-4"><a></a>    translator <span class="op">=</span> deepl.Translator(os.environ[<span class="st">"DEEPL_API_KEY"</span>])  <span class="co"># set your key in env</span></span>
<span id="cb46-5"><a></a>    result <span class="op">=</span> translator.translate_text(</span>
<span id="cb46-6"><a></a>        <span class="st">"Mais quelle bonne traduction nom d'une pipe!"</span>, target_lang<span class="op">=</span><span class="st">"EN-GB"</span></span>
<span id="cb46-7"><a></a>    )</span>
<span id="cb46-8"><a></a>    result.text</span>
<span id="cb46-9"><a></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb46-10"><a></a>    <span class="ss">f"DEEPL example not executed: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
<p>This is what we obtain on Google translate:</p>
<blockquote>
<p>But what a good translation of the name of a pipe!</p>
</blockquote>
</section>
<section id="api-example-chatgpt" class="slide level2">
<h2>API Example: ChatGPT</h2>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1">R</a></li><li><a href="#tabset-6-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">library</span>(chatgpt)</span>
<span id="cb47-2"><a></a><span class="fu">cat</span>(<span class="fu">ask_chatgpt</span>(<span class="st">"What do you think about the Data and Code Management class?"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-6-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a></a><span class="co"># Requires: pip install openai</span></span>
<span id="cb48-2"><a></a><span class="im">import</span> os</span>
<span id="cb48-3"><a></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb48-4"><a></a>client <span class="op">=</span> OpenAI(api_key<span class="op">=</span>os.environ.get(<span class="st">"OPENAI_API_KEY"</span>))</span>
<span id="cb48-5"><a></a>resp <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb48-6"><a></a>    model<span class="op">=</span><span class="st">"gpt-4o-mini"</span>,</span>
<span id="cb48-7"><a></a>    messages<span class="op">=</span>[</span>
<span id="cb48-8"><a></a>        {<span class="st">"role"</span>:<span class="st">"system"</span>,<span class="st">"content"</span>:<span class="st">"You are a helpful assistant."</span>},</span>
<span id="cb48-9"><a></a>        {<span class="st">"role"</span>:<span class="st">"user"</span>,<span class="st">"content"</span>:<span class="st">"What do you think about the Programming Tools in Data Science class in R?"</span>}</span>
<span id="cb48-10"><a></a>    ]</span>
<span id="cb48-11"><a></a>)</span>
<span id="cb48-12"><a></a><span class="bu">print</span>(resp.choices[<span class="dv">0</span>].message.content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="your-turn-58-minutes" class="slide level2">
<h2>Your turn (5‚Äì8 minutes)</h2>
<ul>
<li>Generate a <strong>browser URL</strong> for a city of your choice in OpenWeatherMap.</li>
<li>Use OMDb to search your favorite movie and open its <strong>details</strong> page.</li>
<li>(Stretch) Replace <code>MSFT</code> with another symbol in Alpha Vantage and fetch the JSON.</li>
</ul>
<blockquote>
<p>Bonus: Copy one of the <strong>R/Python</strong> snippets, set your env var locally, and print 3 fields.</p>
</blockquote>
</section>
<section id="keeping-api-keys-safe-classfriendly" class="slide level2">
<h2>Keeping API keys safe (class‚Äëfriendly)</h2>
<ul>
<li><p><strong>Never hard‚Äëcode</strong> secrets in slides, repos, or notebooks.</p></li>
<li><p>Prefer <strong>environment variables</strong>:</p>
<ul>
<li>R: <code>~/.Renviron</code> ‚Üí <code>OPENWEATHER_API_KEY=...</code></li>
<li>Python: set in shell before launch, or use <code>.env</code> + <code>python-dotenv</code> locally.</li>
</ul></li>
<li><p>Rotate / revoke keys if you accidentally leak them.</p></li>
<li><p>Watch the <strong>rate limits</strong> (Alpha Vantage is strict); implement simple retries if needed.</p></li>
</ul>
</section>
<section id="cheatsheet-env-vars" class="slide level2">
<h2>Cheat‚Äësheet: env vars</h2>
<p><strong>macOS/Linux (bash/zsh)</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a></a><span class="bu">export</span> <span class="va">OPENWEATHER_API_KEY</span><span class="op">=</span>xxxxxx</span>
<span id="cb49-2"><a></a><span class="bu">export</span> <span class="va">ALPHAVANTAGE_API_KEY</span><span class="op">=</span>xxxxxx</span>
<span id="cb49-3"><a></a><span class="bu">export</span> <span class="va">OMDB_API_KEY</span><span class="op">=</span>xxxxxx</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Windows (PowerShell)</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode numberSource powershell number-lines code-with-copy"><code class="sourceCode powershell"><span id="cb50-1"><a></a>setx OPENWEATHER_API_KEY <span class="st">"xxxxxx"</span></span>
<span id="cb50-2"><a></a>setx ALPHAVANTAGE_API_KEY <span class="st">"xxxxxx"</span></span>
<span id="cb50-3"><a></a>setx OMDB_API_KEY <span class="st">"xxxxxx"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>R session</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a><span class="fu">Sys.getenv</span>(<span class="st">"OPENWEATHER_API_KEY"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Python session</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a></a><span class="im">import</span> os</span>
<span id="cb52-2"><a></a>os.environ.get(<span class="st">"OPENWEATHER_API_KEY"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="api-1" class="slide level2">
<h2>API</h2>
<ul>
<li><strong>A</strong>pplication <strong>P</strong>rogramming <strong>I</strong>nterface are gold standard for fetching data from the web</li>
<li>Data is fetched by directly posing HTTP requests.</li>
<li>Data requests from <code>R</code> using <code>library(httr)</code> or API wrappers.</li>
<li>Data fetched through the API is generally more reliable.</li>
</ul>
</section>
<section id="whats-an-http-api" class="slide level2">
<h2>What‚Äôs an HTTP API</h2>
<ul>
<li>A <strong>URL endpoint</strong> (e.g., <code>https://api.example.com/resource</code>).</li>
<li>A <strong>method</strong> (GET for reading, POST for creating, ‚Ä¶).</li>
<li><strong>Query parameters</strong> (e.g., <code>?q=Lausanne&amp;units=metric</code>).</li>
<li>Often requires an <strong>API key</strong> (auth &amp; rate limits).</li>
<li>Returns <strong>JSON</strong> most of the time.</li>
</ul>
</section>
<section id="api-2" class="slide level2">
<h2>API</h2>
<p><strong>API = Application Programming Interface</strong> ‚Äî structured endpoints to request data.</p>
<div class="columns">
<div class="column">
<p><strong>Pros</strong></p>
<ul>
<li>Stable schema</li>
<li>Pagination, filters</li>
<li>Legal &amp; documented</li>
<li>Fewer scraping breakages</li>
</ul>
</div><div class="column">
<p><strong>Cons</strong></p>
<ul>
<li>Registration/API key</li>
<li>Rate limits/quotas</li>
<li>Not all data exposed</li>
</ul>
</div></div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="webscraping" class="title-slide slide level1 center">
<h1>Webscraping</h1>

</section>
<section id="webscraping-1" class="slide level2">
<h2>Webscraping</h2>
<ul>
<li>If API is not available, e.g.&nbsp;there is no libraries, you could try to build your own API by following for example <a href="https://colinfay.me/build-api-wrapper-package-r/">this tutorial</a> or <a href="https://httr2.r-lib.org/articles/wrapping-apis.html">that one</a> (not covered in this class).</li>
<li>Instead, we discuss webscraping, a method that is effective regardless of whether a website offers an API.</li>
</ul>
</section>
<section id="when-scraping-is-needed" class="slide level2">
<h2>When scraping is needed</h2>
<p>If no API or missing fields ‚Üí parse the <strong>HTML</strong>.</p>
<ul>
<li>Fetch page (respect robots &amp; rate limits)</li>
<li>Parse DOM</li>
<li>Select nodes (CSS selectors)</li>
<li>Extract text/attributes</li>
</ul>
</section>
<section id="webscraping---a-first-example" class="slide level2">
<h2>Webscraping - a first example</h2>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">R</a></li><li><a href="#tabset-7-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a><span class="fu">library</span>(rvest)</span>
<span id="cb53-2"><a></a>url <span class="ot">&lt;-</span> <span class="st">"https://dcm.samorso.ch/en/lectures/"</span></span>
<span id="cb53-3"><a></a></span>
<span id="cb53-4"><a></a><span class="fu">read_html</span>(url) <span class="sc">%&gt;%</span></span>
<span id="cb53-5"><a></a>  <span class="fu">html_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-6"><a></a>  .[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb53-7"><a></a>  .[<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb53-8"><a></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-7-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb54-2"><a></a>url <span class="op">=</span> <span class="st">"https://dcm.samorso.ch/en/lectures/"</span></span>
<span id="cb54-3"><a></a><span class="co"># pandas can directly read HTML tables into DataFrames</span></span>
<span id="cb54-4"><a></a>tables <span class="op">=</span> pd.read_html(url)</span>
<span id="cb54-5"><a></a>tables[<span class="dv">0</span>].iloc[<span class="dv">4</span>:<span class="dv">7</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="http-requestresponse-cycle" class="slide level2">
<h2>HTTP request/response cycle</h2>

<img data-src="images/http_request_response.png" class="r-stretch"></section>
<section id="scraping" class="slide level2">
<h2>Scraping?</h2>
<center>
<div style="width:800px">
<iframe allow="fullscreen" frameborder="0" height="450" src="https://giphy.com/embed/Q8VCAek0MGjRK" width="800">
</iframe>
</div>
</center>
</section>
<section id="hypertext-markup-language" class="slide level2">
<h2>HyperText Markup Language</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb55-1"><a></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb55-2"><a></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span>    </span>
<span id="cb55-3"><a></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb55-4"><a></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> id</span><span class="op">=</span><span class="st">'first'</span><span class="dt">&gt;</span>Webscraping with R<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb55-5"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb55-6"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb55-7"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb55-8"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb55-9"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb55-10"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb55-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb55-12"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb55-13"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb55-14"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb55-15"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb55-16"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb55-17"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb55-18"><a></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb55-19"><a></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><a href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml_default">Try it!</a></p>
</section>
<section id="html" class="slide level2">
<h2>HTML</h2>
<ul>
<li><strong>element</strong> starts with <code>&lt;tag&gt;</code> and ends <code>&lt;/tag&gt;</code>,</li>
<li>it has optional <strong>attributes</strong> (<code>id=attribute</code>),</li>
<li><strong>content</strong> is everything between two tags.</li>
<li>For example, add the attribute <code>style="background-color:DodgerBlue;"</code> to <code>h1</code> and try it.</li>
</ul>
</section>
<section id="html-elements" class="slide level2">
<h2>HTML elements</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>tag</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>p</td>
<td>Paragraph</td>
</tr>
<tr class="even">
<td>h1</td>
<td>Top-level heading</td>
</tr>
<tr class="odd">
<td>h2, h3, ‚Ä¶</td>
<td>Lower level headings</td>
</tr>
<tr class="even">
<td>ol</td>
<td>Ordered list</td>
</tr>
<tr class="odd">
<td>ul</td>
<td>Unorder list</td>
</tr>
<tr class="even">
<td>li</td>
<td>List item</td>
</tr>
<tr class="odd">
<td>img</td>
<td>Image</td>
</tr>
<tr class="even">
<td>a</td>
<td>Anchor (Hyperlink)</td>
</tr>
<tr class="odd">
<td>div</td>
<td>Section wrapper (block-level)</td>
</tr>
<tr class="even">
<td>span</td>
<td>Text wrapper (in-line)</td>
</tr>
</tbody>
</table>
<p>Find out more tags <a href="https://developer.mozilla.org/en-US/docs/Web/HTML">here</a> or <a href="https://www.w3schools.com/tags/">here</a></p>
</section>
<section id="data-extraction" class="slide level2">
<h2>Data extraction</h2>
<p>Create a minimal HTML page for experimenting</p>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">R</a></li><li><a href="#tabset-8-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a></a>html_page <span class="ot">&lt;-</span> <span class="fu">minimal_html</span>(<span class="st">'</span></span>
<span id="cb56-2"><a></a><span class="st">  &lt;body&gt;</span></span>
<span id="cb56-3"><a></a><span class="st">    &lt;h1&gt;Webscraping with R&lt;/h1&gt;</span></span>
<span id="cb56-4"><a></a><span class="st">    &lt;p&gt; Basic experience with &lt;a href="www.r-project.org"&gt;R&lt;/a&gt; and</span></span>
<span id="cb56-5"><a></a><span class="st">    familiarity with the &lt;em&gt;Tidyverse&lt;/em&gt; is recommended.&lt;/p&gt;</span></span>
<span id="cb56-6"><a></a><span class="st">    &lt;h2&gt;Technologies&lt;/h2&gt;</span></span>
<span id="cb56-7"><a></a><span class="st">    &lt;ol&gt;</span></span>
<span id="cb56-8"><a></a><span class="st">      &lt;li&gt;HTML: &lt;em&gt;Hypertext Markup Language&lt;/em&gt;&lt;/li&gt;</span></span>
<span id="cb56-9"><a></a><span class="st">      &lt;li&gt;CSS: &lt;em&gt;Cascading Style Sheets&lt;/em&gt;&lt;/li&gt;</span></span>
<span id="cb56-10"><a></a><span class="st">    &lt;/ol&gt;</span></span>
<span id="cb56-11"><a></a><span class="st">    &lt;h2&gt;Packages&lt;/h2&gt;</span></span>
<span id="cb56-12"><a></a><span class="st">    &lt;ul&gt;</span></span>
<span id="cb56-13"><a></a><span class="st">      &lt;a href="https://github.com/tidyverse/rvest"&gt;&lt;li&gt;rvest&lt;/li&gt;&lt;/a&gt;</span></span>
<span id="cb56-14"><a></a><span class="st">    &lt;/ul&gt;</span></span>
<span id="cb56-15"><a></a><span class="st">    &lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;:</span></span>
<span id="cb56-16"><a></a><span class="st">    &lt;em&gt;rvest&lt;/em&gt; is included in the &lt;em&gt;tidyverse&lt;/em&gt;&lt;/p&gt;</span></span>
<span id="cb56-17"><a></a><span class="st">  &lt;/body&gt;'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-8-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb57-2"><a></a>html_page <span class="op">=</span> BeautifulSoup(<span class="st">'''</span></span>
<span id="cb57-3"><a></a><span class="st">  &lt;body&gt;</span></span>
<span id="cb57-4"><a></a><span class="st">    &lt;h1&gt;Webscraping with R&lt;/h1&gt;</span></span>
<span id="cb57-5"><a></a><span class="st">    &lt;p&gt; Basic experience with &lt;a href="www.r-project.org"&gt;R&lt;/a&gt; and</span></span>
<span id="cb57-6"><a></a><span class="st">    familiarity with the &lt;em&gt;Tidyverse&lt;/em&gt; is recommended.&lt;/p&gt;</span></span>
<span id="cb57-7"><a></a><span class="st">    &lt;h2&gt;Technologies&lt;/h2&gt;</span></span>
<span id="cb57-8"><a></a><span class="st">    &lt;ol&gt;</span></span>
<span id="cb57-9"><a></a><span class="st">      &lt;li&gt;HTML: &lt;em&gt;Hypertext Markup Language&lt;/em&gt;&lt;/li&gt;</span></span>
<span id="cb57-10"><a></a><span class="st">      &lt;li&gt;CSS: &lt;em&gt;Cascading Style Sheets&lt;/em&gt;&lt;/li&gt;</span></span>
<span id="cb57-11"><a></a><span class="st">    &lt;/ol&gt;</span></span>
<span id="cb57-12"><a></a><span class="st">    &lt;h2&gt;Packages&lt;/h2&gt;</span></span>
<span id="cb57-13"><a></a><span class="st">    &lt;ul&gt;</span></span>
<span id="cb57-14"><a></a><span class="st">      &lt;a href="https://github.com/tidyverse/rvest"&gt;&lt;li&gt;rvest&lt;/li&gt;&lt;/a&gt;</span></span>
<span id="cb57-15"><a></a><span class="st">    &lt;/ul&gt;</span></span>
<span id="cb57-16"><a></a><span class="st">    &lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;:</span></span>
<span id="cb57-17"><a></a><span class="st">    &lt;em&gt;rvest&lt;/em&gt; is included in the &lt;em&gt;tidyverse&lt;/em&gt;&lt;/p&gt;</span></span>
<span id="cb57-18"><a></a><span class="st">  &lt;/body&gt;'''</span>, <span class="st">'html.parser'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-list-item-li" class="slide level2">
<h2>Example: list item (li)</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58" data-code-line-numbers="4-5,9"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb58-1"><a></a>...</span>
<span id="cb58-2"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb58-3"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb58-4"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span> </span>
<span id="cb58-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span> </span>
<span id="cb58-6"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb58-7"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb58-8"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb58-9"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> </span>
<span id="cb58-10"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb58-11"><a></a>...</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1">R</a></li><li><a href="#tabset-9-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"li"</span>)</span>
<span id="cb59-2"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"li"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-9-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a></a>[e <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'li'</span>)]</span>
<span id="cb60-2"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'li'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-heading-of-order-2-h2" class="slide level2">
<h2>Example: heading of order 2 (h2)</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61" data-code-line-numbers="2,7"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb61-1"><a></a>...</span>
<span id="cb61-2"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb61-3"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb61-4"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb61-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb61-6"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb61-7"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb61-8"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb61-9"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb61-10"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb61-11"><a></a>...</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-10" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-10-1">R</a></li><li><a href="#tabset-10-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"h2"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-10-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'h2'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-emphasized-text-em" class="slide level2">
<h2>Example: emphasized text (em)</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64" data-code-line-numbers="2,5,6,13"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb64-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb64-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb64-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb64-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb64-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span> </span>
<span id="cb64-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb64-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb64-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb64-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb64-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb64-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb64-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb64-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-11" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-11-1">R</a></li><li><a href="#tabset-11-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-11-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"em"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-11-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'em'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="cascading-style-sheets-css" class="slide level2">
<h2>Cascading Style Sheets (CSS)</h2>
<ul>
<li>CSS is used to specify the style (appearance, arrangement and variations) of your web pages.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb67-1"><a></a><span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb67-2"><a></a>body {</span>
<span id="cb67-3"><a></a>  <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">lightblue</span><span class="op">;</span></span>
<span id="cb67-4"><a></a>}</span>
<span id="cb67-5"><a></a>h1 {</span>
<span id="cb67-6"><a></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">white</span><span class="op">;</span></span>
<span id="cb67-7"><a></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb67-8"><a></a>}</span>
<span id="cb67-9"><a></a><span class="fu">.content</span> {</span>
<span id="cb67-10"><a></a><span class="kw">font-family</span><span class="ch">:</span> <span class="dv">monospace</span><span class="op">;</span></span>
<span id="cb67-11"><a></a><span class="kw">font-size</span><span class="ch">:</span> <span class="dv">1.5</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb67-12"><a></a><span class="kw">color</span><span class="ch">:</span> <span class="cn">black</span><span class="op">;</span></span>
<span id="cb67-13"><a></a>}</span>
<span id="cb67-14"><a></a><span class="pp">#intro</span> {</span>
<span id="cb67-15"><a></a>  <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">lightgrey</span><span class="op">;</span></span>
<span id="cb67-16"><a></a>  <span class="kw">border-style</span><span class="ch">:</span> <span class="dv">solid</span><span class="op">;</span></span>
<span id="cb67-17"><a></a>  <span class="kw">border-width</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb67-18"><a></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb67-19"><a></a>  <span class="kw">margin</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb67-20"><a></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb67-21"><a></a>}</span>
<span id="cb67-22"><a></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="css-selectors-cheatsheet" class="slide level2">
<h2>CSS selectors cheat‚Äësheet</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>selector</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>tag</code></td>
<td>element by tag</td>
</tr>
<tr class="even">
<td><code>.class</code></td>
<td>by class</td>
</tr>
<tr class="odd">
<td><code>#id</code></td>
<td>by id</td>
</tr>
<tr class="even">
<td><code>a[href]</code></td>
<td>attribute present</td>
</tr>
<tr class="odd">
<td><code>a[href*="wiki"]</code></td>
<td>attr contains</td>
</tr>
<tr class="even">
<td><code>parent &gt; child</code></td>
<td>direct child</td>
</tr>
<tr class="odd">
<td><code>A + B</code></td>
<td>adjacent sibling</td>
</tr>
<tr class="even">
<td><code>A ~ B</code></td>
<td>any following sibling</td>
</tr>
<tr class="odd">
<td><code>:first-child</code>, <code>:nth-child(2)</code></td>
<td>structural pseudo‚Äëclasses</td>
</tr>
<tr class="even">
<td><code>:not(X)</code></td>
<td>negation</td>
</tr>
</tbody>
</table>
<p><a href="https://flukeout.github.io/">CSS diner</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors">CSS selector</a>, <a href="https://www.w3schools.com/css/css_selectors.asp">W3 School</a></p>
</section>
<section id="css-selector-grouping" class="slide level2">
<h2>CSS Selector: grouping (<code>,</code>)</h2>
<ul>
<li>The grouping selector selects all the HTML elements with the same style definitions.</li>
<li>For example, <code>div, p</code> selects all <code>&lt;div&gt;</code> elements and all <code>&lt;em&gt;</code> elements.</li>
</ul>
</section>
<section id="example-grouping-li-and-em" class="slide level2">
<h2>Example: grouping <code>li</code> and <code>em</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb68-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb68-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb68-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb68-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb68-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb68-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb68-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb68-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb68-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb68-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb68-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb68-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb68-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-grouping-li-and-em-1" class="slide level2">
<h2>Example: grouping <code>li</code> and <code>em</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69" data-code-line-numbers="2,5,6,10,13"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb69-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb69-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span> </span>
<span id="cb69-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb69-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb69-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span> </span>
<span id="cb69-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span> </span>
<span id="cb69-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb69-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb69-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb69-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> </span>
<span id="cb69-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb69-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb69-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span> #<span class="er">&lt;&lt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-12" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-12-1">R</a></li><li><a href="#tabset-12-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-12-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"li, em"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-12-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'li, em'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="css-selector-descendant-selector-space" class="slide level2">
<h2>CSS Selector: descendant selector (<code>space</code>)</h2>
<ul>
<li>The descendant selector matches all elements that are descendants of a specified element.</li>
<li>For example, <code>div p</code> selects all <code>&lt;p&gt;</code> elements inside <code>&lt;div&gt;</code> elements.</li>
</ul>
</section>
<section id="example-all-em-that-are-descendants-of-li" class="slide level2">
<h2>Example: all <code>em</code> that are descendants of <code>li</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb72-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb72-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb72-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb72-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb72-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb72-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb72-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb72-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb72-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb72-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb72-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb72-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb72-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-all-em-that-are-descendants-of-li-1" class="slide level2">
<h2>Example: all <code>em</code> that are descendants of <code>li</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73" data-code-line-numbers="5-6"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb73-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb73-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb73-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb73-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb73-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb73-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb73-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb73-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb73-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb73-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb73-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb73-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb73-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-13" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-13-1">R</a></li><li><a href="#tabset-13-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-13-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"li em"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-13-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'li em'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="css-selector-child-selector" class="slide level2">
<h2>CSS Selector: child selector (<code>&gt;</code>)</h2>
<ul>
<li>The child selector selects all elements that are the children of a specified element.</li>
<li>For example, <code>div &gt; p</code> selects all <code>&lt;p&gt;</code> elements that are children of a <code>&lt;div&gt;</code> element.</li>
</ul>
</section>
<section id="example-all-em-that-are-children-of-p" class="slide level2">
<h2>Example: all <code>em</code> that are children of <code>p</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb76-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb76-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb76-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb76-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb76-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb76-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb76-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb76-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb76-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb76-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb76-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb76-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb76-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-all-em-that-are-children-of-p-1" class="slide level2">
<h2>Example: all <code>em</code> that are children of <code>p</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77" data-code-line-numbers="2,13"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb77-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb77-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb77-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb77-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb77-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb77-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb77-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb77-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb77-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb77-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb77-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb77-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb77-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-14" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-14-1">R</a></li><li><a href="#tabset-14-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-14-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"p &gt; em"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-14-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'p &gt; em'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="css-selector-adjacent-sibling-selector" class="slide level2">
<h2>CSS Selector: adjacent sibling selector (<code>+</code>)</h2>
<ul>
<li>The adjacent sibling selector is used to select an element that is directly after another specific element.</li>
<li>Sibling elements must have the same parent element, and ‚Äúadjacent‚Äù means ‚Äúimmediately following‚Äù.</li>
<li>For example, <code>div + p</code> selects the first <code>&lt;p&gt;</code> element that is situated immediately after <code>&lt;div&gt;</code> elements.</li>
</ul>
</section>
<section id="example-em-immediately-after-p" class="slide level2">
<h2>Example: <code>em</code> immediately after <code>p</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb80-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb80-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb80-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb80-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb80-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb80-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb80-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb80-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb80-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb80-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb80-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb80-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb80-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-em-immediately-after-p-1" class="slide level2">
<h2>Example: <code>em</code> immediately after <code>p</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb81-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb81-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb81-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb81-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb81-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb81-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb81-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb81-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb81-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb81-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb81-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb81-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb81-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-15" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-15-1">R</a></li><li><a href="#tabset-15-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-15-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"p + em"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-15-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'p + em'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
<p>No <code>em</code> are immediately after <code>p</code>.</p>
</section>
<section id="example-em-immediately-after-em" class="slide level2">
<h2>Example: <code>em</code> immediately after <code>em</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb84-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb84-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb84-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb84-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb84-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb84-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb84-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb84-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb84-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb84-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb84-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb84-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb84-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-em-immediately-after-em-1" class="slide level2">
<h2>Example: <code>em</code> immediately after <code>em</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85" data-code-line-numbers="13"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb85-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb85-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb85-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb85-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb85-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb85-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb85-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb85-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb85-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb85-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb85-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb85-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb85-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-16" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-16-1">R</a></li><li><a href="#tabset-16-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-16-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"em + em"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-16-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'em + em'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="css-selector-general-sibling-selector" class="slide level2">
<h2>CSS Selector: general sibling selector (<code>~</code>)</h2>
<ul>
<li>The general sibling selector selects all elements that are next siblings of a specified element.</li>
<li>Sibling elements must have the same parent element, and ‚Äúgeneral‚Äù means ‚Äúany place‚Äù.</li>
<li>For example, <code>div ~ p</code> selects all <code>&lt;p&gt;</code> elements that are preceded by a <code>&lt;div&gt;</code> element.</li>
</ul>
</section>
<section id="example-em-next-sibling-of-a" class="slide level2">
<h2>Example: <code>em</code> next sibling of <code>a</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb88-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb88-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb88-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb88-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb88-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb88-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb88-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb88-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb88-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb88-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb88-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb88-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb88-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-em-next-sibling-of-a-1" class="slide level2">
<h2>Example: <code>em</code> next sibling of <code>a</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89" data-code-line-numbers="1-2"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb89-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and </span>
<span id="cb89-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span> </span>
<span id="cb89-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb89-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb89-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb89-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb89-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb89-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb89-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb89-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb89-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb89-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb89-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-17" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-17-1">R</a></li><li><a href="#tabset-17-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-17-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"a ~ em"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-17-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'a ~ em'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
<p>(Here, we would have obtained the same result with <code>a + em</code>)</p>
</section>
<section id="css-selector-first-child-selector-first-child" class="slide level2">
<h2>CSS Selector: first child selector (<code>:first-child</code>)</h2>
<ul>
<li><code>:first-child</code> selects the specified element that is the first child of another element.</li>
<li>For example, <code>p:first-child</code> selects all <code>&lt;p&gt;</code> elements that are the first child of any other element.</li>
</ul>
</section>
<section id="example-all-li-that-are-first-children" class="slide level2">
<h2>Example: all <code>li</code> that are first children</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb92-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb92-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb92-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb92-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb92-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb92-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb92-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb92-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb92-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb92-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb92-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb92-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb92-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-all-li-that-are-first-children-1" class="slide level2">
<h2>Example: all <code>li</code> that are first children</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93" data-code-line-numbers="5,10"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb93-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb93-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb93-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb93-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb93-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span>  </span>
<span id="cb93-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb93-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb93-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb93-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb93-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> </span>
<span id="cb93-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb93-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb93-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-18" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-18-1">R</a></li><li><a href="#tabset-18-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-18-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"li:first-child"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-18-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'li:first-child'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="css-selector-nth-child-selector-nth-childn" class="slide level2">
<h2>CSS Selector: nth child selector (<code>:nth-child(n)</code>)</h2>
<ul>
<li>Remark: <code>:last-child</code> is completely symmetric to <code>:first-child</code>.</li>
<li><code>:nth-child(n)</code> selects the specified element that is the nth child of another element.</li>
<li>For example, <code>p:nth-child(2)</code> selects all <code>&lt;p&gt;</code> elements that are the second child of any other element.</li>
</ul>
</section>
<section id="example-all-li-that-are-second-children" class="slide level2">
<h2>Example: all <code>li</code> that are second children</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb96-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb96-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb96-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb96-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb96-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb96-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb96-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb96-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb96-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb96-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb96-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb96-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb96-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-all-li-that-are-second-children-1" class="slide level2">
<h2>Example: all <code>li</code> that are second children</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97" data-code-line-numbers="6"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb97-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb97-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb97-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb97-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb97-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb97-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span> </span>
<span id="cb97-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb97-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb97-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb97-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb97-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb97-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb97-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-19" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-19-1">R</a></li><li><a href="#tabset-19-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-19-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"li:nth-child(2)"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-19-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a></a>[e.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> e <span class="kw">in</span> html_page.select(<span class="st">'li:nth-child(2)'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="html-attributes" class="slide level2">
<h2>HTML attributes</h2>
<ul>
<li>All HTML elements can have attributes, additional information about elements.</li>
<li>Attributes are always specified in the start tag, usually in the format <code>name="value"</code>.</li>
<li>For example, <code>&lt;a href="www.r-project.org"&gt;R&lt;/a&gt;</code>, <code>href</code> is an attribute of <code>a</code> that specifies an url.</li>
<li>Attributes can be accessed with <code>html_attr</code> command.</li>
</ul>
</section>
<section id="example-href-attributes" class="slide level2">
<h2>Example: <code>href</code> attributes</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb100-1"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and</span>
<span id="cb100-2"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb100-3"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb100-4"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb100-5"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb100-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb100-7"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb100-8"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb100-9"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb100-10"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb100-11"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb100-12"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb100-13"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="example-href-attributes-1" class="slide level2">
<h2>Example: <code>href</code> attributes</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101" data-code-line-numbers="1,10"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb101-1"><a></a></span>
<span id="cb101-2"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span> Basic experience with <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"www.r-project.org"</span><span class="dt">&gt;</span>R<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> and </span>
<span id="cb101-3"><a></a>    familiarity with the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is recommended.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb101-4"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Technologies<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb101-5"><a></a>    <span class="dt">&lt;</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb101-6"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>HTML: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Hypertext Markup Language<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb101-7"><a></a>      <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>CSS: <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>Cascading Style Sheets<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb101-8"><a></a>    <span class="dt">&lt;/</span><span class="kw">ol</span><span class="dt">&gt;</span></span>
<span id="cb101-9"><a></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Packages<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb101-10"><a></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb101-11"><a></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"https://github.com/tidyverse/rvest"</span><span class="dt">&gt;&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span> </span>
<span id="cb101-12"><a></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb101-13"><a></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>Note<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>:</span>
<span id="cb101-14"><a></a>    <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>rvest<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;</span> is included in the <span class="dt">&lt;</span><span class="kw">em</span><span class="dt">&gt;</span>tidyverse<span class="dt">&lt;/</span><span class="kw">em</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="panel-tabset">
<ul id="tabset-20" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-20-1">R</a></li><li><a href="#tabset-20-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-20-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"a"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_attr</span>(<span class="st">"href"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-20-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a></a>[a.get(<span class="st">'href'</span>) <span class="cf">for</span> a <span class="kw">in</span> html_page.select(<span class="st">'a'</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="html-tables" class="slide level2">
<h2>HTML tables</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>tag</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>table</td>
<td>Table section</td>
</tr>
<tr class="even">
<td>tr</td>
<td>Table row</td>
</tr>
<tr class="odd">
<td>td</td>
<td>Table cell</td>
</tr>
<tr class="even">
<td>th</td>
<td>Table header</td>
</tr>
</tbody>
</table>
<ul>
<li>Tables can be fetched by using the command <code>html_table()</code></li>
</ul>
</section>
<section class="slide level2">

<div class="panel-tabset">
<ul id="tabset-21" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-21-1">R</a></li><li><a href="#tabset-21-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-21-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a></a>basic_table <span class="ot">&lt;-</span> <span class="fu">minimal_html</span>(<span class="st">'</span></span>
<span id="cb104-2"><a></a><span class="st">&lt;body&gt;</span></span>
<span id="cb104-3"><a></a><span class="st">&lt;table&gt;</span></span>
<span id="cb104-4"><a></a><span class="st">  &lt;tr&gt;</span></span>
<span id="cb104-5"><a></a><span class="st">    &lt;th&gt;Month&lt;/th&gt;</span></span>
<span id="cb104-6"><a></a><span class="st">    &lt;th&gt;Savings&lt;/th&gt;</span></span>
<span id="cb104-7"><a></a><span class="st">  &lt;/tr&gt;</span></span>
<span id="cb104-8"><a></a><span class="st">  &lt;tr&gt;</span></span>
<span id="cb104-9"><a></a><span class="st">    &lt;td&gt;January&lt;/td&gt;</span></span>
<span id="cb104-10"><a></a><span class="st">    &lt;td&gt;$100&lt;/td&gt;</span></span>
<span id="cb104-11"><a></a><span class="st">  &lt;/tr&gt;</span></span>
<span id="cb104-12"><a></a><span class="st">  &lt;tr&gt;</span></span>
<span id="cb104-13"><a></a><span class="st">    &lt;td&gt;February&lt;/td&gt;</span></span>
<span id="cb104-14"><a></a><span class="st">    &lt;td&gt;$80&lt;/td&gt;</span></span>
<span id="cb104-15"><a></a><span class="st">  &lt;/tr&gt;</span></span>
<span id="cb104-16"><a></a><span class="st">&lt;/table&gt;</span></span>
<span id="cb104-17"><a></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb104-18"><a></a><span class="st">'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a></a>basic_table <span class="sc">%&gt;%</span> <span class="fu">html_table</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-21-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb106-2"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb106-3"><a></a>basic_table_html <span class="op">=</span> <span class="st">'''</span></span>
<span id="cb106-4"><a></a><span class="st">&lt;body&gt;</span></span>
<span id="cb106-5"><a></a><span class="st">&lt;table&gt;</span></span>
<span id="cb106-6"><a></a><span class="st">  &lt;tr&gt;</span></span>
<span id="cb106-7"><a></a><span class="st">    &lt;th&gt;Month&lt;/th&gt;</span></span>
<span id="cb106-8"><a></a><span class="st">    &lt;th&gt;Savings&lt;/th&gt;</span></span>
<span id="cb106-9"><a></a><span class="st">  &lt;/tr&gt;</span></span>
<span id="cb106-10"><a></a><span class="st">  &lt;tr&gt;</span></span>
<span id="cb106-11"><a></a><span class="st">    &lt;td&gt;January&lt;/td&gt;</span></span>
<span id="cb106-12"><a></a><span class="st">    &lt;td&gt;$100&lt;/td&gt;</span></span>
<span id="cb106-13"><a></a><span class="st">  &lt;/tr&gt;</span></span>
<span id="cb106-14"><a></a><span class="st">  &lt;tr&gt;</span></span>
<span id="cb106-15"><a></a><span class="st">    &lt;td&gt;February&lt;/td&gt;</span></span>
<span id="cb106-16"><a></a><span class="st">    &lt;td&gt;$80&lt;/td&gt;</span></span>
<span id="cb106-17"><a></a><span class="st">  &lt;/tr&gt;</span></span>
<span id="cb106-18"><a></a><span class="st">&lt;/table&gt;</span></span>
<span id="cb106-19"><a></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb106-20"><a></a><span class="st">'''</span></span>
<span id="cb106-21"><a></a>soup <span class="op">=</span> BeautifulSoup(basic_table_html, <span class="st">'html.parser'</span>)</span>
<span id="cb106-22"><a></a>pd.read_html(<span class="bu">str</span>(soup))[<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-wikipedia-table" class="slide level2">
<h2>Example: Wikipedia table</h2>
<ul>
<li>We would like to fetch the table with Qualified teams of the Rugby World Cup 2023 on Wikipedia.</li>
<li>A first solution: fetch all tables and select the correct one.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-22" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-22-1">R</a></li><li><a href="#tabset-22-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-22-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a></a>url <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb107-2"><a></a>url <span class="sc">%&gt;%</span> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="fu">html_table</span>() <span class="sc">%&gt;%</span> .[[<span class="dv">4</span>]] <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-22-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb108-2"><a></a>url <span class="op">=</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb108-3"><a></a><span class="co"># Fetch all tables, pick the 5th (0-indexed 4) like the R example</span></span>
<span id="cb108-4"><a></a>pd.read_html(url)[<span class="dv">4</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-wikipedia-table-1" class="slide level2">
<h2>Example: Wikipedia table</h2>
<ul>
<li>Inspect the HTML with the developer tools.</li>
</ul>

<img data-src="images/wikitable_rugby.png" style="width:90.0%" class="r-stretch"></section>
<section id="example-wikipedia-table-2" class="slide level2">
<h2>Example: Wikipedia table</h2>
<ul>
<li>A better solution using CSS selectors: using the class selector (<code>.</code>).</li>
<li>Select <code>class="wikitable"</code>.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-23" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-23-1">R</a></li><li><a href="#tabset-23-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-23-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a></a>url <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb109-2"><a></a>url <span class="sc">%&gt;%</span> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">".wikitable"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_table</span>() <span class="sc">%&gt;%</span> .[[<span class="dv">3</span>]] <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">kable</span>() <span class="co"># equivalently html_nodes("table.wikitable")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-23-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb110-2"><a></a>url <span class="op">=</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb110-3"><a></a><span class="co"># read_html can filter by attrs (class)</span></span>
<span id="cb110-4"><a></a>pd.read_html(url, attrs<span class="op">=</span>{<span class="st">"class"</span>:<span class="st">"wikitable"</span>})[<span class="dv">2</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-wikipedia-table-3" class="slide level2">
<h2>Example: Wikipedia table</h2>
<ul>
<li>A better solution using CSS selectors: using the class selector (<code>.</code>).</li>
<li>Select <code>class="wikitable sortable"</code>.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-24" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-24-1">R</a></li><li><a href="#tabset-24-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-24-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a></a>url <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb111-2"><a></a>url <span class="sc">%&gt;%</span> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">".wikitable.sortable"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_table</span>() <span class="sc">%&gt;%</span>  kableExtra<span class="sc">::</span><span class="fu">kable</span>() <span class="co"># equivalently html_nodes("table.wikitable.sortable")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-24-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb112-2"><a></a>url <span class="op">=</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb112-3"><a></a>pd.read_html(url, attrs<span class="op">=</span>{<span class="st">"class"</span>:<span class="st">"wikitable sortable"</span>})[<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-wikipedia-table-4" class="slide level2">
<h2>Example: Wikipedia table</h2>
<ul>
<li>An alternative solution: select <code>table</code> immediately after four <code>p</code>.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-25" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-25-1">R</a></li><li><a href="#tabset-25-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-25-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a></a>url <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb113-2"><a></a>url <span class="sc">%&gt;%</span> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">"p + p + p + p + table"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_table</span>() <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-25-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a></a><span class="im">import</span> requests, pandas <span class="im">as</span> pd</span>
<span id="cb114-2"><a></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb114-3"><a></a>url <span class="op">=</span> <span class="st">"https://en.wikipedia.org/wiki/2023_Rugby_World_Cup"</span></span>
<span id="cb114-4"><a></a>html <span class="op">=</span> requests.get(url).text</span>
<span id="cb114-5"><a></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb114-6"><a></a>table <span class="op">=</span> soup.select_one(<span class="st">'p + p + p + p + table'</span>)</span>
<span id="cb114-7"><a></a>pd.read_html(<span class="bu">str</span>(table))[<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="why-web-scraping-could-be-bad" class="slide level2">
<h2>Why web scraping could be bad?</h2>
<ul>
<li>Scraping increases web traffic.</li>
<li>People ignore and violate <code>robots.txt</code> and Terms of Service (ToS) of websites.</li>
<li>You should avoid those troubles by following these simple rules:</li>
</ul>
<ol type="1">
<li>Read ToS of the website you want to scrap.</li>
<li>Inspect <code>robots.txt</code> (see <a href="https://cran.r-project.org/robots.txt">https://cran.r-project.org/robots.txt</a> for instance).</li>
<li>Use a reasonable frequency of requests (force your program to make some pauses).</li>
</ol>
</section>
<section id="respect-robots-be-polite" class="slide level2">
<h2>Respect robots, be polite</h2>
<ul>
<li>Check <strong>robots.txt</strong> and TOS</li>
<li>Identify yourself via <strong>User‚ÄëAgent</strong></li>
<li>Add random <strong>delays</strong> and exponential <strong>backoff</strong></li>
<li><strong>Cache</strong> responses during development</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-26" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-26-1">R</a></li><li><a href="#tabset-26-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-26-1">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a></a><span class="fu">library</span>(polite)</span>
<span id="cb115-2"><a></a>robotstxt<span class="sc">::</span><span class="fu">paths_allowed</span>(<span class="st">"https://en.wikipedia.org/wiki/Main_Page"</span>)</span>
<span id="cb115-3"><a></a><span class="co"># caching demo</span></span>
<span id="cb115-4"><a></a><span class="fu">library</span>(httr2)</span>
<span id="cb115-5"><a></a>req <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://httpbin.org/get"</span>) <span class="sc">|&gt;</span></span>
<span id="cb115-6"><a></a>  <span class="fu">req_options</span>(<span class="at">useragent =</span> <span class="st">"DaCM-course/1.0"</span>) <span class="sc">|&gt;</span></span>
<span id="cb115-7"><a></a>  <span class="fu">req_perform</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="tabset-26-2">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb116"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a></a><span class="im">import</span> time, random, requests</span>
<span id="cb116-2"><a></a><span class="im">from</span> urllib <span class="im">import</span> robotparser</span>
<span id="cb116-3"><a></a><span class="im">from</span> tenacity <span class="im">import</span> retry, wait_exponential, stop_after_attempt</span>
<span id="cb116-4"><a></a><span class="im">import</span> requests_cache</span>
<span id="cb116-5"><a></a></span>
<span id="cb116-6"><a></a>rp <span class="op">=</span> robotparser.RobotFileParser()</span>
<span id="cb116-7"><a></a>rp.set_url(<span class="st">"https://en.wikipedia.org/robots.txt"</span>)<span class="op">;</span> rp.read()</span>
<span id="cb116-8"><a></a>rp.can_fetch(<span class="st">"DaCM-course"</span>, <span class="st">"https://en.wikipedia.org/wiki/Main_Page"</span>)</span>
<span id="cb116-9"><a></a></span>
<span id="cb116-10"><a></a>session <span class="op">=</span> requests_cache.CachedSession(<span class="st">"scrape_cache"</span>, expire_after<span class="op">=</span><span class="dv">3600</span>)</span>
<span id="cb116-11"><a></a><span class="at">@retry</span>(wait<span class="op">=</span>wait_exponential(multiplier<span class="op">=</span><span class="dv">1</span>, <span class="bu">min</span><span class="op">=</span><span class="dv">1</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">30</span>), stop<span class="op">=</span>stop_after_attempt(<span class="dv">5</span>))</span>
<span id="cb116-12"><a></a><span class="kw">def</span> get(url):</span>
<span id="cb116-13"><a></a>    time.sleep(random.uniform(<span class="fl">0.5</span>,<span class="fl">1.5</span>))</span>
<span id="cb116-14"><a></a>    <span class="cf">return</span> session.get(url, headers<span class="op">=</span>{<span class="st">"User-Agent"</span>:<span class="st">"DaCM-course/1.0"</span>}, timeout<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb116-15"><a></a>resp <span class="op">=</span> get(<span class="st">"https://httpbin.org/get"</span>)</span>
<span id="cb116-16"><a></a>resp.json()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section>
<section id="dynamic-sites-advanced" class="slide level2">
<h2>Dynamic sites (advanced)</h2>
<ul>
<li>Sometimes, what you see in your browser is not what is returned by <code>read_html()</code>. In many cases, this is due to website that employs methods for dynamic data requests.</li>
<li>A solution is to simulate a browser to cope with dynamically rendered webpages.</li>
<li><em>Selenium</em> offers a solution. It is a project focused on automating web browsers.</li>
<li>You have access to Selenium with the <code>RSelenium</code> package.</li>
<li>An alternative is the <code>chromote</code> package (developped by Posit) that focuses on <a href="https://chromedevtools.github.io/devtools-protocol/">Chrome DevTools Protocol</a>.</li>
</ul>
</section>
<section id="world-bank-data" class="slide level2">
<h2>World bank data</h2>
<div class="cell">
<iframe src="https://data.worldbank.org/indicator/SP.ADO.TFRT" width="960" height="400px" data-external="1">
</iframe>
</div>
</section>
<section id="world-bank-data-1" class="slide level2">
<h2>World bank data</h2>

<img data-src="images/worlddata.png" style="width:60.0%" class="r-stretch"></section>
<section id="world-bank-data-2" class="slide level2">
<h2>World bank data</h2>
<ul>
<li>Trying to fetch the data <em>non-dynamically</em> using <code>class="item"</code>.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-27" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-27-1">R</a></li><li><a href="#tabset-27-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-27-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a></a>url <span class="ot">&lt;-</span> <span class="st">"https://data.worldbank.org/indicator/SP.ADO.TFRT"</span></span>
<span id="cb117-2"><a></a>url <span class="sc">%&gt;%</span> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">".item"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>() <span class="co"># or html_nodes("div.item")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li>Only the header is returned.</li>
</ul>
</div>
<div id="tabset-27-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a></a><span class="im">import</span> requests</span>
<span id="cb118-2"><a></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb118-3"><a></a>url <span class="op">=</span> <span class="st">"https://data.worldbank.org/indicator/SP.ADO.TFRT"</span></span>
<span id="cb118-4"><a></a>soup <span class="op">=</span> BeautifulSoup(requests.get(url).text, <span class="st">'html.parser'</span>)</span>
<span id="cb118-5"><a></a>[x.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> x <span class="kw">in</span> soup.select(<span class="st">'.item'</span>)][:<span class="dv">6</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code># Only header-like elements typically appear; dynamic content isn't in the initial HTML.</code></pre>
</div>
</div>
</div>
</section>
<section id="world-bank-data-3" class="slide level2">
<h2>World bank data</h2>
<ul>
<li>A first dynamic solution.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-28" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-28-1">R</a></li><li><a href="#tabset-28-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-28-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a></a><span class="fu">library</span>(chromote)</span>
<span id="cb120-2"><a></a>b <span class="ot">&lt;-</span> ChromoteSession<span class="sc">$</span><span class="fu">new</span>() <span class="co"># open a chromote session</span></span>
<span id="cb120-3"><a></a>url <span class="ot">&lt;-</span> <span class="st">"https://data.worldbank.org/indicator/SP.ADO.TFRT"</span></span>
<span id="cb120-4"><a></a>b<span class="sc">$</span>Page<span class="sc">$</span><span class="fu">navigate</span>(url) <span class="co"># navigate to the url</span></span>
<span id="cb120-5"><a></a>b<span class="sc">$</span>Runtime<span class="sc">$</span><span class="fu">evaluate</span>(<span class="st">"document.querySelector('html').outerHTML"</span>)<span class="sc">$</span>result<span class="sc">$</span>value <span class="sc">%&gt;%</span></span>
<span id="cb120-6"><a></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">".item"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>() <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb120-7"><a></a>b<span class="sc">$</span><span class="fu">close</span>() <span class="co"># close the session</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-28-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a></a><span class="co"># Example with Selenium (browser automation). Requires: pip install selenium webdriver-manager</span></span>
<span id="cb121-2"><a></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb121-3"><a></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb121-4"><a></a><span class="im">from</span> selenium.webdriver.firefox.options <span class="im">import</span> Options</span>
<span id="cb121-5"><a></a><span class="im">from</span> webdriver_manager.firefox <span class="im">import</span> GeckoDriverManager</span>
<span id="cb121-6"><a></a></span>
<span id="cb121-7"><a></a>options <span class="op">=</span> Options()</span>
<span id="cb121-8"><a></a>options.add_argument(<span class="st">"-headless"</span>)</span>
<span id="cb121-9"><a></a>driver <span class="op">=</span> webdriver.Firefox(executable_path<span class="op">=</span>GeckoDriverManager().install(), options<span class="op">=</span>options)</span>
<span id="cb121-10"><a></a>url <span class="op">=</span> <span class="st">"https://data.worldbank.org/indicator/SP.ADO.TFRT"</span></span>
<span id="cb121-11"><a></a>driver.get(url)</span>
<span id="cb121-12"><a></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb121-13"><a></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb121-14"><a></a>items <span class="op">=</span> [x.get_text(strip<span class="op">=</span><span class="va">True</span>) <span class="cf">for</span> x <span class="kw">in</span> soup.select(<span class="st">'.item'</span>)][:<span class="dv">6</span>]</span>
<span id="cb121-15"><a></a>driver.quit()</span>
<span id="cb121-16"><a></a>items</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="world-bank-data-4" class="slide level2">
<h2>World bank data</h2>
<p>Some comments on the <code>chromote</code> command:</p>
<ul>
<li><code>b &lt;- ChromoteSession$new()</code> create a new <code>ChromoteSession</code> object assigned to <code>b</code>.</li>
<li><code>b$Page$navigate(url)</code> navigates to the provided URL.</li>
<li>The <code>Runtime$evaluate</code> command tells the browser to run JavaScript code.</li>
<li>The JavaScript code <code>document.querySelector('html').outerHTML</code> selects the

element from the current web page‚Äôs Document Object Model (DOM), and then retrieves its entire HTML content, including the element itself and everything inside it.</li>
<li>Essentially, it captures the entire structure of the HTML document, from the opening

tag to the closing

tag, as a string.</li>
<li>Notice that the browser can be viewed using <code>b$view()</code></li>
<li>Check the package <a href="https://github.com/rstudio/chromote">site</a> for more info.</li>
</ul>
</section>
<section id="world-bank-data-5" class="slide level2">
<h2>World bank data</h2>
<ul>
<li><code>chromote</code> is for <code>Chrome</code>, <code>Chromium</code> and the likes. <code>Selenium</code> is more general.</li>
<li>Unfortunately, the solution using <code>RSelenium</code> is currently not working properly. But here is how a possible implementation would look like.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-29" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-29-1">R</a></li><li><a href="#tabset-29-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-29-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a></a>rD <span class="ot">&lt;-</span> <span class="fu">rsDriver</span>(<span class="at">browser=</span><span class="st">"firefox"</span>, <span class="at">port=</span><span class="dv">4545</span>L, <span class="at">verbose=</span>F)</span>
<span id="cb122-2"><a></a>remDr <span class="ot">&lt;-</span> rD[[<span class="st">"client"</span>]]</span>
<span id="cb122-3"><a></a>remDr<span class="sc">$</span><span class="fu">navigate</span>(url)</span>
<span id="cb122-4"><a></a>html_page <span class="ot">&lt;-</span> remDr<span class="sc">$</span><span class="fu">getPageSource</span>()[[<span class="dv">1</span>]]</span>
<span id="cb122-5"><a></a>html_page <span class="sc">%&gt;%</span> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="fu">html_nodes</span>(<span class="st">".item"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-29-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a></a><span class="co"># Selenium example shown previously; equivalent: use Chrome/Firefox drivers similarly.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="dynamic-sites-overview" class="slide level2">
<h2>Dynamic sites (overview)</h2>
<p>When HTML is <strong>rendered by JavaScript</strong>, <code>read_html()</code>/<code>requests</code> won‚Äôt see final content.</p>
<p>Options:</p>
<ul>
<li><strong>R <code>chromote</code></strong> (Chrome DevTools Protocol)</li>
<li><strong>Python <code>playwright</code></strong> (modern) or <strong><code>selenium</code></strong> (browser automation)</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-30" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-30-1">R ‚Äî <code>chromote</code></a></li><li><a href="#tabset-30-2">Python ‚Äî <code>playwright</code></a></li></ul>
<div class="tab-content">
<div id="tabset-30-1">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a></a><span class="fu">library</span>(chromote)</span>
<span id="cb124-2"><a></a>b <span class="ot">&lt;-</span> ChromoteSession<span class="sc">$</span><span class="fu">new</span>(); b<span class="sc">$</span>Page<span class="sc">$</span><span class="fu">navigate</span>(<span class="st">"https://data.worldbank.org/indicator/SP.ADO.TFRT"</span>)</span>
<span id="cb124-3"><a></a>html <span class="ot">&lt;-</span> b<span class="sc">$</span>Runtime<span class="sc">$</span><span class="fu">evaluate</span>(<span class="st">"document.documentElement.outerHTML"</span>)<span class="sc">$</span>result<span class="sc">$</span>value</span>
<span id="cb124-4"><a></a><span class="fu">read_html</span>(html) <span class="sc">|&gt;</span></span>
<span id="cb124-5"><a></a>  <span class="fu">html_elements</span>(<span class="st">".some-selector"</span>) <span class="sc">|&gt;</span></span>
<span id="cb124-6"><a></a>  <span class="fu">html_text</span>()</span>
<span id="cb124-7"><a></a>b<span class="sc">$</span><span class="fu">close</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="tabset-30-2">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb125"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a></a><span class="co"># playwright install must have been run once</span></span>
<span id="cb125-2"><a></a><span class="im">from</span> playwright.sync_api <span class="im">import</span> sync_playwright</span>
<span id="cb125-3"><a></a><span class="cf">with</span> sync_playwright() <span class="im">as</span> p:</span>
<span id="cb125-4"><a></a>    browser <span class="op">=</span> p.chromium.launch(headless<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb125-5"><a></a>    page <span class="op">=</span> browser.new_page()</span>
<span id="cb125-6"><a></a>    page.goto(<span class="st">"https://data.worldbank.org/indicator/SP.ADO.TFRT"</span>, wait_until<span class="op">=</span><span class="st">"networkidle"</span>)</span>
<span id="cb125-7"><a></a>    html <span class="op">=</span> page.content()</span>
<span id="cb125-8"><a></a>    <span class="co"># parse with BeautifulSoup here</span></span>
<span id="cb125-9"><a></a>    browser.close()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section>
<section id="regular-expressions" class="slide level2">
<h2>Regular Expressions</h2>
<ul>
<li>Regular expressions (regex) are patterns used to match character combinations in strings. They are particularly useful for extracting or replacing parts of text data.</li>
</ul>
</section>
<section id="using-regex-in-r" class="slide level2">
<h2>Using Regex in R</h2>
<ul>
<li><p>R has built-in functions to work with regular expressions:</p>
<ul>
<li><code>grep()</code>: Search for matches of a pattern in a character vector.</li>
<li><code>grepl()</code>: Returns a logical vector indicating if there is a match.</li>
<li><code>sub()</code>, <code>gsub()</code>: Replace the first or all occurrences of a pattern in a string.</li>
<li><code>regexpr()</code>, <code>gregexpr()</code>: Find the position and length of matches.</li>
<li><code>str_extract()</code> and <code>str_replace()</code> from <code>stringr</code> package for a tidy approach.</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p><strong>Python equivalents:</strong></p>
<ul>
<li><code>re.search</code>, <code>re.findall</code>, <code>re.finditer</code> for matching.</li>
<li><code>re.sub</code> for replacing.</li>
<li><code>re.compile</code> to pre-compile patterns.</li>
<li><code>pandas.Series.str.contains</code> / <code>.extract</code> / <code>.replace</code> for vectorized ops on Series.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="basics-of-regular-expressions" class="slide level2">
<h2>Basics of Regular Expressions</h2>
<ul>
<li><p>Common symbols used in regular expressions:</p>
<ul>
<li><code>.</code>: Any single character except newline.</li>
<li><code>*</code>: Zero or more repetitions of the preceding character.</li>
<li><code>+</code>: One or more repetitions of the preceding character.</li>
<li><code>?</code>: Zero or one repetition of the preceding character.</li>
<li><code>[]</code>: A set of characters. For example, <code>[abc]</code> matches ‚Äòa‚Äô, ‚Äòb‚Äô, or ‚Äòc‚Äô.</li>
<li><code>^</code>: In <code>[]</code>, it inverts the match. For example, <code>[^abc]</code> matches everything except ‚Äòa‚Äô, ‚Äòb‚Äô, or ‚Äòc‚Äô.</li>
<li><code>^</code>: Matches the start of a string.</li>
<li><code>$</code>: Matches the end of a string.</li>
<li><code>-</code>: Defines a range of characters. For example, <code>[a-z]</code> matches any lowercase letter.</li>
<li><code>\\</code>: Escape character.</li>
</ul></li>
</ul>
</section>
<section id="useful-pairs-of-characters" class="slide level2">
<h2>Useful pairs of characters</h2>
<ul>
<li><code>\\d</code>: Any digit.</li>
<li><code>\\D</code>: Any non-digit.</li>
<li><code>\\w</code>: Any word character (alphanumeric + underscore).</li>
<li><code>\\W</code>: Any non-word character.</li>
<li><code>\\s</code>: Any whitespace character.</li>
<li><code>\\S</code>: Any non-whitespace character.</li>
</ul>
<p>Quantifiers:</p>
<ul>
<li><code>{n}</code>: Exactly n repetitions.</li>
<li><code>{n,}</code>: At least n repetitions.</li>
<li><code>{n,m}</code>: Between n and m repetitions.</li>
</ul>
</section>
<section id="example-extracting-data-with-regex" class="slide level2">
<h2>Example: Extracting Data with Regex</h2>
<div class="panel-tabset">
<ul id="tabset-31" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-31-1">R</a></li><li><a href="#tabset-31-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-31-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a></a><span class="fu">library</span>(stringr)</span>
<span id="cb126-2"><a></a></span>
<span id="cb126-3"><a></a>text <span class="ot">&lt;-</span> <span class="st">"John's email is john.doe@example.com and Jane's email is jane_doe123@example.org"</span></span>
<span id="cb126-4"><a></a></span>
<span id="cb126-5"><a></a><span class="co"># Extract all email addresses</span></span>
<span id="cb126-6"><a></a><span class="co"># chatGPT solution:</span></span>
<span id="cb126-7"><a></a><span class="co"># emails &lt;- str_extract_all(text, "[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}")</span></span>
<span id="cb126-8"><a></a>emails <span class="ot">&lt;-</span> <span class="fu">str_extract_all</span>(text, <span class="st">"</span><span class="sc">\\</span><span class="st">S+@</span><span class="sc">\\</span><span class="st">S+"</span>)</span>
<span id="cb126-9"><a></a><span class="fu">print</span>(emails)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-31-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a></a><span class="im">import</span> re</span>
<span id="cb127-2"><a></a>text <span class="op">=</span> <span class="st">"John's email is john.doe@example.com and Jane's email is jane_doe123@example.org"</span></span>
<span id="cb127-3"><a></a><span class="co"># ChatGPT-like stricter pattern (commented):</span></span>
<span id="cb127-4"><a></a><span class="co"># emails = re.findall(r"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}", text)</span></span>
<span id="cb127-5"><a></a>emails <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\S</span><span class="op">+</span><span class="vs">@</span><span class="dv">\S</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb127-6"><a></a>emails</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="example-cleaning-text-with-regex" class="slide level2">
<h2>Example: Cleaning Text with Regex</h2>
<ul>
<li>Use <code>gsub()</code> to clean text data by removing unwanted characters.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-32" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-32-1">R</a></li><li><a href="#tabset-32-2">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-32-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a></a><span class="co"># Replace all non-alphanumeric characters with a space</span></span>
<span id="cb128-2"><a></a><span class="co"># chatGPT solution:</span></span>
<span id="cb128-3"><a></a><span class="co"># clean_text &lt;- gsub("[^a-zA-Z0-9\\s]", " ", "Hello, World! Welcome to R programming.")</span></span>
<span id="cb128-4"><a></a>clean_text <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">W"</span>, <span class="st">" "</span>, <span class="st">"Hello, World! Welcome to R programming."</span>)</span>
<span id="cb128-5"><a></a><span class="fu">print</span>(clean_text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-32-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a></a><span class="im">import</span> re</span>
<span id="cb129-2"><a></a>clean_text <span class="op">=</span> re.sub(<span class="vs">r"</span><span class="dv">\W</span><span class="vs">"</span>, <span class="st">" "</span>, <span class="st">"Hello, World! Welcome to R programming."</span>)</span>
<span id="cb129-3"><a></a>clean_text</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section>
<section id="miniexercises" class="slide level2">
<h2>Mini‚Äëexercises</h2>
<ol type="1">
<li><strong>Selector hunt:</strong> On a Wikipedia page of your choice, find a CSS selector that returns exactly the list of section headings.</li>
<li><strong>Table picker:</strong> Extract one table from a Wikipedia article <em>both</em> with R and Python. Compare row counts.</li>
<li><strong>Link map:</strong> Collect the first 20 unique links from a Wikipedia page of your choice and count domain frequency (R or Python).</li>
<li><strong>Respect the robots:</strong> Check if scraping is allowed for a path of your choice.</li>
</ol>
</section>
<section id="common-pitfalls-fixes" class="slide level2">
<h2>Common pitfalls &amp; fixes</h2>
<ul>
<li><strong>Changed selectors?</strong> Prefer stable hooks: IDs, <code>data-*</code> attributes, semantic classes</li>
<li><strong>Encoding issues?</strong> Check <code>content-type</code> and use <code>encoding='utf-8'</code></li>
<li><strong>Blocked?</strong> Reduce rate, rotate User-Agent, add referer; never bypass auth/captcha</li>
</ul>
</section>
<section id="references-further-reading" class="slide level2">
<h2>References &amp; further reading</h2>
<ul>
<li><strong>R</strong>: <em>rvest</em> (tidyverse.org), <em>httr2</em>, <em>polite</em>, <em>chromote</em></li>
<li><strong>Python</strong>: <em>requests</em>, <em>BeautifulSoup</em>, <em>lxml</em>, <em>pandas.read_html</em>, <em>playwright</em>, <em>selenium</em>, <em>requests-cache</em>, <em>tenacity</em></li>
<li><strong>Regex</strong>: R4DS chapters on regex; regex101.com for testing</li>
<li><strong>Ethics</strong>: robotstxt.org; site Terms of Service</li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="logo_dacm.svg" class="slide-logo"></p>
<div class="footer footer-default">
<p>HEC Lausanne ¬∑ Business Analytics ¬∑ Thu 9:00‚Äì12:00</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'h.v',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const icon = "Óßã";
        const anchorJS = new window.AnchorJS();
        anchorJS.options = {
          placement: 'right',
          icon: icon
        };
        anchorJS.add('.anchored');
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>